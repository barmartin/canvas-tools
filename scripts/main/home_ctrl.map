{"version":3,"file":"home_ctrl.js","sources":["../../../build/scripts/main/home_ctrl.js"],"names":["angular","module","factory","$q","$timeout","$rootScope","findEndEventName","endEventNames","name","undefined","transElement","style","$transition","element","trigger","options","deferred","defer","endEventName","animation","transitionEndHandler","$apply","unbind","resolve","bind","isString","addClass","isFunction","isObject","css","promise","cancel","reject","document","createElement","transitionEndEventNames","WebkitTransition","MozTransition","OTransition","transition","animationEndEventNames","transitionEndEventName","animationEndEventName","directive","fixUpHeight","scope","height","removeClass","offsetWidth","link","attrs","isCollapsed","initialAnimSkip","$watch","scrollHeight","collapse","value","expand","currentTransition","doTransition","change","then","constant","closeOthers","controller","$scope","$attrs","accordionConfig","this","groups","openGroup","isDefined","$eval","forEach","group","isOpen","addGroup","groupScope","that","push","$on","removeGroup","index","indexOf","splice","restrict","transclude","replace","templateUrl","$parse","require","heading","setHeading","accordionCtrl","getIsOpen","setIsOpen","assign","$parent","template","compile","attr","accordionGroupCtrl","accordionTransclude","html","append","type","close","iElement","iAttrs","closeable","data","bindHtmlUnsafe","activeClass","toggleEvent","buttonConfig","ngModelCtrl","$render","toggleClass","equals","$modelValue","btnRadio","hasClass","$setViewValue","getTrueValue","trueValue","btnCheckboxTrue","getFalseValue","falseValue","btnCheckboxFalse","restartTimer","go","isPlaying","next","pause","currentTimeout","interval","isNaN","self","slides","currentIndex","currentSlide","select","nextSlide","direction","goNext","noTransition","$element","slide","extend","entering","leaving","active","$currentTransition","current","transitionDone","nextIndex","indexOfSlide","newIndex","length","prev","isActive","play","noPause","addSlide","removeSlide","carouselCtrl","getActive","setActive","lastValue","parentActive","$document","$window","getStyle","el","cssprop","currentStyle","getComputedStyle","isStaticPositioned","parentOffsetEl","docDomEl","offsetParent","position","elBCR","offset","offsetParentBCR","top","left","offsetParentEl","clientTop","scrollTop","clientLeft","scrollLeft","width","prop","boundingClientRect","getBoundingClientRect","pageYOffset","body","documentElement","pageXOffset","dayFormat","monthFormat","yearFormat","dayHeaderFormat","dayTitleFormat","monthTitleFormat","showWeeks","startingDay","yearRange","minDate","maxDate","dateFilter","dtConfig","getValue","defaultValue","getDaysInMonth","year","month","Date","getDate","getDates","startDate","n","dates","Array","i","setDate","makeDate","date","format","isSelected","isSecondary","label","selected","secondary","day","dayHeader","dayTitle","monthTitle","modes","getVisibleDates","getFullYear","getMonth","firstDayOfMonth","difference","getDay","numDisplayedFromPreviousMonth","firstDate","numDates","days","labels","dt","j","objects","title","compare","date1","date2","split","step","months","years","startYear","parseInt","join","isDisabled","mode","currentMode","dateDisabled","datepickerConfig","$log","ctrls","updateShowWeekNumbers","showWeekNumbers","arr","size","arrays","refill","updateSelected","valid","ngModel","error","$setValidity","datepickerCtrl","obj","disabled","rows","setMode","getISO8601WeekNumber","checkDate","time","getTime","setMonth","Math","floor","round","min","max","setFullYear","move","toggleMode","getWeekNumber","row","dateFormat","closeOnDateSelection","$compile","$position","datepickerPopupConfig","originalScope","setOpen","parseDate","viewValue","isDate","updateCalendar","updatePosition","addWatchableAttribute","attribute","scopeProperty","datepickerAttribute","datepickerEl","datepickerPopup","$new","$destroy","documentClickBind","event","target","elementFocusBind","popupEl","ng-model","ng-change","find","datepickerOptions","$parsers","unshift","dateSelection","$viewValue","val","documentBindingInitialized","elementFocusInitialized","focus","$setModelValue","today","clear","after","preventDefault","stopPropagation","openElement","closeMenu","noop","parent","elementWasOpen","createNew","stack","add","key","get","keys","remove","idx","removeTop","$modalStack","animate","evt","modal","getTop","backdrop","dismiss","windowClass","$$stackedMap","backdropIndex","topBackdropIndex","opened","openedWindows","removeModalWindow","modalInstance","modalWindow","modalDomEl","backdropDomEl","modalScope","backdropjqLiteEl","backdropScope","eq","newBackdropIndex","which","keyboard","open","angularDomEl","content","result","reason","provider","$modalProvider","$get","$injector","$http","$templateCache","$controller","getTemplatePromise","when","cache","getResolvePromises","resolves","promisesArr","isArray","invoke","$modal","modalOptions","modalResultDeferred","modalOpenedDeferred","Error","templateAndResolvePromise","all","concat","tplAndVars","$close","$dismiss","ctrlInstance","ctrlLocals","resolveIter","$modalInstance","$interpolate","init","defaultItemsPerPage","itemsPerPage","totalPages","calculateTotalPages","noPrevious","page","noNext","ceil","totalItems","getAttributeValue","interpolate","render","pages","getPages","selectPage","onSelectPage","numPages","boundaryLinks","directionLinks","firstText","previousText","nextText","lastText","rotate","config","paginationCtrl","makePage","number","text","maxSize","currentPage","startPage","endPage","isMaxSized","previousPageSet","nextPageSet","previousPage","nextPage","firstPage","lastPage","align","isPrevious","isNext","previous","snake_case","regexp","separator","letter","pos","toLowerCase","defaultOptions","placement","popupDelay","triggerMap","mouseenter","click","globalOptions","setTriggers","triggers","prefix","defaultTriggerShow","getTriggers","show","hide","directiveName","startSym","startSymbol","endSym","endSymbol","toggleTooltipBind","tt_isOpen","hideTooltipBind","showTooltipBind","tt_popupDelay","popupTimeout","ttWidth","ttHeight","ttPosition","tt_content","transitionTimeout","tooltip","display","appendToBody","$body","tt_placement","tt_animation","hasRegisteredTriggers","$observe","tt_title","delay","$tooltip","autoType","stackedTypes","progressConfig","getStackedType","makeBar","newBar","oldBar","newValue","oldValue","from","to","addBar","bar","bars","totalPercent","clearBars","onFull","onEmpty","old","stateOn","stateOff","ratingConfig","maxRange","createDefaultRange","len","defaultStateObject","states","normalizeRange","range","ratingStates","copy","rate","readonly","enter","onHover","reset","onLeave","ctrl","tabs","tab","addTab","removeTab","newActiveIndex","elm","tabsetCtrl","vertical","tabsAbove","$transcludeFn","onSelect","onDeselect","isTabHeading","node","tagName","hasAttribute","tabContentTransclude","contents","headingElement","tabsetTitles","hourStep","minuteStep","showMeridian","meridians","readonlyInput","mousewheel","timepickerConfig","getHoursFromTemplate","hours","meridian","getMinutesFromTemplate","minutes","pad","toString","refresh","keyboardChange","makeValid","updateTemplate","invalidHours","invalidMinutes","getHours","getMinutes","addMinutes","setHours","$error","inputs","hoursInputEl","minutesInputEl","isScrollingUp","e","originalEvent","delta","wheelDelta","deltaY","detail","incrementHours","decrementHours","incrementMinutes","decrementMinutes","updateHours","updateMinutes","invalidate","validHours","setMinutes","toggleMeridian","TYPEAHEAD_REGEXP","parse","input","match","itemName","source","viewMapper","modelMapper","typeaheadParser","HOT_KEYS","modelCtrl","minSearch","typeaheadMinLength","waitTime","typeaheadWaitMs","isEditable","typeaheadEditable","isLoadingSetter","typeaheadLoading","onSelectCallback","typeaheadOnSelect","inputFormatter","typeaheadInputFormatter","parserResult","typeahead","popUpEl","matches","query","typeaheadTemplateUrl","resetMatches","activeIdx","getMatchesAsync","inputValue","locals","model","timeoutPromise","$formatters","modelValue","candidateViewValue","emptyViewValue","item","$item","$model","$label","$digest","dismissClickHandler","matchIdx","selectActive","selectMatch","tplUrl","success","tplContent","replaceWith","trim","filter","escapeRegexp","queryToEscape","matchItem","RegExp","define","angularAMD","panelTab","kit","digest","$$phase","isPanelActive","panelName","fieldFocus","unfocus","objectSelector","selectedObject","objectSelectorClasses","objList","selectObject","maxObjects","constants","MAX_OBJECTS","petalCount","petalChange","updatePetalCount","_u","parseIntOrDefault","DEFAULT_RAYS","initialized","radialAccent","radialChange","updateRadialAccent","parseFloatOrDefault","addObject","removeObject","backgroundAlpha","backgroundAlphaChange","setAlpha","redraw","sources","SOURCE_MODES","sourceKeys","getKeys","sourceMode","updateCompositionMode","getImage","editMode","setEditMode","loopInit","sceneLoop","stop","stopScene","segment","getSegment","selectFirst","selectPrev","selectNext","selectLast","removeKeyframe","removeLast","lengthChange","keyFrames","timing","rotation","rotationChange","newRotation","reduceSig","PI","seamlessAnimation","seamlessChange","highlightCurve","highlightCurveChange","fieldData","loadSample","dataz","$","parseJSON","sampleJSON","loadData","getLoadData","settings","getSettings","JSON","stringify","resourceList","objTypes","clearScene","backgroundImageSource","backgroundImageSourceChange","addBackgroundImage","backgroundImagePage","backgroundImagePageChange","fillImageSource","fillImageSourceChange","addFillImage","fillImagePage","fillImagePageChange"],"mappings":"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","sourcesContent":["angular.module(\"ui.bootstrap\", [\"ui.bootstrap.transition\",\"ui.bootstrap.collapse\",\"ui.bootstrap.accordion\",\"ui.bootstrap.alert\",\"ui.bootstrap.bindHtml\",\"ui.bootstrap.buttons\",\"ui.bootstrap.carousel\",\"ui.bootstrap.position\",\"ui.bootstrap.datepicker\",\"ui.bootstrap.dropdownToggle\",\"ui.bootstrap.modal\",\"ui.bootstrap.pagination\",\"ui.bootstrap.tooltip\",\"ui.bootstrap.popover\",\"ui.bootstrap.progressbar\",\"ui.bootstrap.rating\",\"ui.bootstrap.tabs\",\"ui.bootstrap.timepicker\",\"ui.bootstrap.typeahead\"]);\nangular.module('ui.bootstrap.transition', [])\n\n/**\n * $transition service provides a consistent interface to trigger CSS 3 transitions and to be informed when they complete.\n * @param  {DOMElement} element  The DOMElement that will be animated.\n * @param  {string|object|function} trigger  The thing that will cause the transition to start:\n *   - As a string, it represents the css class to be added to the element.\n *   - As an object, it represents a hash of style attributes to be applied to the element.\n *   - As a function, it represents a function to be called that will cause the transition to occur.\n * @return {Promise}  A promise that is resolved when the transition finishes.\n */\n.factory('$transition', ['$q', '$timeout', '$rootScope', function($q, $timeout, $rootScope) {\n\n  var $transition = function(element, trigger, options) {\n    options = options || {};\n    var deferred = $q.defer();\n    var endEventName = $transition[options.animation ? \"animationEndEventName\" : \"transitionEndEventName\"];\n\n    var transitionEndHandler = function(event) {\n      $rootScope.$apply(function() {\n        element.unbind(endEventName, transitionEndHandler);\n        deferred.resolve(element);\n      });\n    };\n\n    if (endEventName) {\n      element.bind(endEventName, transitionEndHandler);\n    }\n\n    // Wrap in a timeout to allow the browser time to update the DOM before the transition is to occur\n    $timeout(function() {\n      if ( angular.isString(trigger) ) {\n        element.addClass(trigger);\n      } else if ( angular.isFunction(trigger) ) {\n        trigger(element);\n      } else if ( angular.isObject(trigger) ) {\n        element.css(trigger);\n      }\n      //If browser does not support transitions, instantly resolve\n      if ( !endEventName ) {\n        deferred.resolve(element);\n      }\n    });\n\n    // Add our custom cancel function to the promise that is returned\n    // We can call this if we are about to run a new transition, which we know will prevent this transition from ending,\n    // i.e. it will therefore never raise a transitionEnd event for that transition\n    deferred.promise.cancel = function() {\n      if ( endEventName ) {\n        element.unbind(endEventName, transitionEndHandler);\n      }\n      deferred.reject('Transition cancelled');\n    };\n\n    return deferred.promise;\n  };\n\n  // Work out the name of the transitionEnd event\n  var transElement = document.createElement('trans');\n  var transitionEndEventNames = {\n    'WebkitTransition': 'webkitTransitionEnd',\n    'MozTransition': 'transitionend',\n    'OTransition': 'oTransitionEnd',\n    'transition': 'transitionend'\n  };\n  var animationEndEventNames = {\n    'WebkitTransition': 'webkitAnimationEnd',\n    'MozTransition': 'animationend',\n    'OTransition': 'oAnimationEnd',\n    'transition': 'animationend'\n  };\n  function findEndEventName(endEventNames) {\n    for (var name in endEventNames){\n      if (transElement.style[name] !== undefined) {\n        return endEventNames[name];\n      }\n    }\n  }\n  $transition.transitionEndEventName = findEndEventName(transitionEndEventNames);\n  $transition.animationEndEventName = findEndEventName(animationEndEventNames);\n  return $transition;\n}]);\n\nangular.module('ui.bootstrap.collapse',['ui.bootstrap.transition'])\n\n// The collapsible directive indicates a block of html that will expand and collapse\n.directive('collapse', ['$transition', function($transition) {\n  // CSS transitions don't work with height: auto, so we have to manually change the height to a\n  // specific value and then once the animation completes, we can reset the height to auto.\n  // Unfortunately if you do this while the CSS transitions are specified (i.e. in the CSS class\n  // \"collapse\") then you trigger a change to height 0 in between.\n  // The fix is to remove the \"collapse\" CSS class while changing the height back to auto - phew!\n  var fixUpHeight = function(scope, element, height) {\n    // We remove the collapse CSS class to prevent a transition when we change to height: auto\n    element.removeClass('collapse');\n    element.css({ height: height });\n    // It appears that  reading offsetWidth makes the browser realise that we have changed the\n    // height already :-/\n    var x = element[0].offsetWidth;\n    element.addClass('collapse');\n  };\n\n  return {\n    link: function(scope, element, attrs) {\n\n      var isCollapsed;\n      var initialAnimSkip = true;\n      scope.$watch(function (){ return element[0].scrollHeight; }, function (value) {\n        //The listener is called when scollHeight changes\n        //It actually does on 2 scenarios: \n        // 1. Parent is set to display none\n        // 2. angular bindings inside are resolved\n        //When we have a change of scrollHeight we are setting again the correct height if the group is opened\n        if (element[0].scrollHeight !== 0) {\n          if (!isCollapsed) {\n            if (initialAnimSkip) {\n              fixUpHeight(scope, element, element[0].scrollHeight + 'px');\n            } else {\n              fixUpHeight(scope, element, 'auto');\n            }\n          }\n        }\n      });\n      \n      scope.$watch(attrs.collapse, function(value) {\n        if (value) {\n          collapse();\n        } else {\n          expand();\n        }\n      });\n      \n\n      var currentTransition;\n      var doTransition = function(change) {\n        if ( currentTransition ) {\n          currentTransition.cancel();\n        }\n        currentTransition = $transition(element,change);\n        currentTransition.then(\n          function() { currentTransition = undefined; },\n          function() { currentTransition = undefined; }\n        );\n        return currentTransition;\n      };\n\n      var expand = function() {\n        if (initialAnimSkip) {\n          initialAnimSkip = false;\n          if ( !isCollapsed ) {\n            fixUpHeight(scope, element, 'auto');\n          }\n        } else {\n          doTransition({ height : element[0].scrollHeight + 'px' })\n          .then(function() {\n            // This check ensures that we don't accidentally update the height if the user has closed\n            // the group while the animation was still running\n            if ( !isCollapsed ) {\n              fixUpHeight(scope, element, 'auto');\n            }\n          });\n        }\n        isCollapsed = false;\n      };\n      \n      var collapse = function() {\n        isCollapsed = true;\n        if (initialAnimSkip) {\n          initialAnimSkip = false;\n          fixUpHeight(scope, element, 0);\n        } else {\n          fixUpHeight(scope, element, element[0].scrollHeight + 'px');\n          doTransition({'height':'0'});\n        }\n      };\n    }\n  };\n}]);\n\nangular.module('ui.bootstrap.accordion', ['ui.bootstrap.collapse'])\n\n.constant('accordionConfig', {\n  closeOthers: true\n})\n\n.controller('AccordionController', ['$scope', '$attrs', 'accordionConfig', function ($scope, $attrs, accordionConfig) {\n  \n  // This array keeps track of the accordion groups\n  this.groups = [];\n\n  // Ensure that all the groups in this accordion are closed, unless close-others explicitly says not to\n  this.closeOthers = function(openGroup) {\n    var closeOthers = angular.isDefined($attrs.closeOthers) ? $scope.$eval($attrs.closeOthers) : accordionConfig.closeOthers;\n    if ( closeOthers ) {\n      angular.forEach(this.groups, function (group) {\n        if ( group !== openGroup ) {\n          group.isOpen = false;\n        }\n      });\n    }\n  };\n  \n  // This is called from the accordion-group directive to add itself to the accordion\n  this.addGroup = function(groupScope) {\n    var that = this;\n    this.groups.push(groupScope);\n\n    groupScope.$on('$destroy', function (event) {\n      that.removeGroup(groupScope);\n    });\n  };\n\n  // This is called from the accordion-group directive when to remove itself\n  this.removeGroup = function(group) {\n    var index = this.groups.indexOf(group);\n    if ( index !== -1 ) {\n      this.groups.splice(this.groups.indexOf(group), 1);\n    }\n  };\n\n}])\n\n// The accordion directive simply sets up the directive controller\n// and adds an accordion CSS class to itself element.\n.directive('accordion', function () {\n  return {\n    restrict:'EA',\n    controller:'AccordionController',\n    transclude: true,\n    replace: false,\n    templateUrl: 'template/accordion/accordion.html'\n  };\n})\n\n// The accordion-group directive indicates a block of html that will expand and collapse in an accordion\n.directive('accordionGroup', ['$parse', '$transition', '$timeout', function($parse, $transition, $timeout) {\n  return {\n    require:'^accordion',         // We need this directive to be inside an accordion\n    restrict:'EA',\n    transclude:true,              // It transcludes the contents of the directive into the template\n    replace: true,                // The element containing the directive will be replaced with the template\n    templateUrl:'template/accordion/accordion-group.html',\n    scope:{ heading:'@' },        // Create an isolated scope and interpolate the heading attribute onto this scope\n    controller: ['$scope', function($scope) {\n      this.setHeading = function(element) {\n        this.heading = element;\n      };\n    }],\n    link: function(scope, element, attrs, accordionCtrl) {\n      var getIsOpen, setIsOpen;\n\n      accordionCtrl.addGroup(scope);\n\n      scope.isOpen = false;\n      \n      if ( attrs.isOpen ) {\n        getIsOpen = $parse(attrs.isOpen);\n        setIsOpen = getIsOpen.assign;\n\n        scope.$watch(\n          function watchIsOpen() { return getIsOpen(scope.$parent); },\n          function updateOpen(value) { scope.isOpen = value; }\n        );\n        \n        scope.isOpen = getIsOpen ? getIsOpen(scope.$parent) : false;\n      }\n\n      scope.$watch('isOpen', function(value) {\n        if ( value ) {\n          accordionCtrl.closeOthers(scope);\n        }\n        if ( setIsOpen ) {\n          setIsOpen(scope.$parent, value);\n        }\n      });\n    }\n  };\n}])\n\n// Use accordion-heading below an accordion-group to provide a heading containing HTML\n// <accordion-group>\n//   <accordion-heading>Heading containing HTML - <img src=\"...\"></accordion-heading>\n// </accordion-group>\n.directive('accordionHeading', function() {\n  return {\n    restrict: 'EA',\n    transclude: true,   // Grab the contents to be used as the heading\n    template: '',       // In effect remove this element!\n    replace: true,\n    require: '^accordionGroup',\n    compile: function(element, attr, transclude) {\n      return function link(scope, element, attr, accordionGroupCtrl) {\n        // Pass the heading to the accordion-group controller\n        // so that it can be transcluded into the right place in the template\n        // [The second parameter to transclude causes the elements to be cloned so that they work in ng-repeat]\n        accordionGroupCtrl.setHeading(transclude(scope, function() {}));\n      };\n    }\n  };\n})\n\n// Use in the accordion-group template to indicate where you want the heading to be transcluded\n// You must provide the property on the accordion-group controller that will hold the transcluded element\n// <div class=\"accordion-group\">\n//   <div class=\"accordion-heading\" ><a ... accordion-transclude=\"heading\">...</a></div>\n//   ...\n// </div>\n.directive('accordionTransclude', function() {\n  return {\n    require: '^accordionGroup',\n    link: function(scope, element, attr, controller) {\n      scope.$watch(function() { return controller[attr.accordionTransclude]; }, function(heading) {\n        if ( heading ) {\n          element.html('');\n          element.append(heading);\n        }\n      });\n    }\n  };\n});\n\nangular.module(\"ui.bootstrap.alert\", []).directive('alert', function () {\n  return {\n    restrict:'EA',\n    templateUrl:'template/alert/alert.html',\n    transclude:true,\n    replace:true,\n    scope: {\n      type: '=',\n      close: '&'\n    },\n    link: function(scope, iElement, iAttrs, controller) {\n      scope.closeable = \"close\" in iAttrs;\n    }\n  };\n});\n\nangular.module('ui.bootstrap.bindHtml', [])\n\n  .directive('bindHtmlUnsafe', function () {\n    return function (scope, element, attr) {\n      element.addClass('ng-binding').data('$binding', attr.bindHtmlUnsafe);\n      scope.$watch(attr.bindHtmlUnsafe, function bindHtmlUnsafeWatchAction(value) {\n        element.html(value || '');\n      });\n    };\n  });\nangular.module('ui.bootstrap.buttons', [])\n\n  .constant('buttonConfig', {\n    activeClass:'active',\n    toggleEvent:'click'\n  })\n\n  .directive('btnRadio', ['buttonConfig', function (buttonConfig) {\n  var activeClass = buttonConfig.activeClass || 'active';\n  var toggleEvent = buttonConfig.toggleEvent || 'click';\n\n  return {\n\n    require:'ngModel',\n    link:function (scope, element, attrs, ngModelCtrl) {\n\n      //model -> UI\n      ngModelCtrl.$render = function () {\n        element.toggleClass(activeClass, angular.equals(ngModelCtrl.$modelValue, scope.$eval(attrs.btnRadio)));\n      };\n\n      //ui->model\n      element.bind(toggleEvent, function () {\n        if (!element.hasClass(activeClass)) {\n          scope.$apply(function () {\n            ngModelCtrl.$setViewValue(scope.$eval(attrs.btnRadio));\n            ngModelCtrl.$render();\n          });\n        }\n      });\n    }\n  };\n}])\n\n  .directive('btnCheckbox', ['buttonConfig', function (buttonConfig) {\n\n  var activeClass = buttonConfig.activeClass || 'active';\n  var toggleEvent = buttonConfig.toggleEvent || 'click';\n\n  return {\n    require:'ngModel',\n    link:function (scope, element, attrs, ngModelCtrl) {\n\n      function getTrueValue() {\n        var trueValue = scope.$eval(attrs.btnCheckboxTrue);\n        return angular.isDefined(trueValue) ? trueValue : true;\n      }\n\n      function getFalseValue() {\n        var falseValue = scope.$eval(attrs.btnCheckboxFalse);\n        return angular.isDefined(falseValue) ? falseValue : false;\n      }\n\n      //model -> UI\n      ngModelCtrl.$render = function () {\n        element.toggleClass(activeClass, angular.equals(ngModelCtrl.$modelValue, getTrueValue()));\n      };\n\n      //ui->model\n      element.bind(toggleEvent, function () {\n        scope.$apply(function () {\n          ngModelCtrl.$setViewValue(element.hasClass(activeClass) ? getFalseValue() : getTrueValue());\n          ngModelCtrl.$render();\n        });\n      });\n    }\n  };\n}]);\n/**\n* @ngdoc overview\n* @name ui.bootstrap.carousel\n*\n* @description\n* AngularJS version of an image carousel.\n*\n*/\nangular.module('ui.bootstrap.carousel', ['ui.bootstrap.transition'])\n.controller('CarouselController', ['$scope', '$timeout', '$transition', '$q', function ($scope, $timeout, $transition, $q) {\n  var self = this,\n    slides = self.slides = [],\n    currentIndex = -1,\n    currentTimeout, isPlaying;\n  self.currentSlide = null;\n\n  /* direction: \"prev\" or \"next\" */\n  self.select = function(nextSlide, direction) {\n    var nextIndex = slides.indexOf(nextSlide);\n    //Decide direction if it's not given\n    if (direction === undefined) {\n      direction = nextIndex > currentIndex ? \"next\" : \"prev\";\n    }\n    if (nextSlide && nextSlide !== self.currentSlide) {\n      if ($scope.$currentTransition) {\n        $scope.$currentTransition.cancel();\n        //Timeout so ng-class in template has time to fix classes for finished slide\n        $timeout(goNext);\n      } else {\n        goNext();\n      }\n    }\n    function goNext() {\n      //If we have a slide to transition from and we have a transition type and we're allowed, go\n      if (self.currentSlide && angular.isString(direction) && !$scope.noTransition && nextSlide.$element) {\n        //We shouldn't do class manip in here, but it's the same weird thing bootstrap does. need to fix sometime\n        nextSlide.$element.addClass(direction);\n        var reflow = nextSlide.$element[0].offsetWidth; //force reflow\n\n        //Set all other slides to stop doing their stuff for the new transition\n        angular.forEach(slides, function(slide) {\n          angular.extend(slide, {direction: '', entering: false, leaving: false, active: false});\n        });\n        angular.extend(nextSlide, {direction: direction, active: true, entering: true});\n        angular.extend(self.currentSlide||{}, {direction: direction, leaving: true});\n\n        $scope.$currentTransition = $transition(nextSlide.$element, {});\n        //We have to create new pointers inside a closure since next & current will change\n        (function(next,current) {\n          $scope.$currentTransition.then(\n            function(){ transitionDone(next, current); },\n            function(){ transitionDone(next, current); }\n          );\n        }(nextSlide, self.currentSlide));\n      } else {\n        transitionDone(nextSlide, self.currentSlide);\n      }\n      self.currentSlide = nextSlide;\n      currentIndex = nextIndex;\n      //every time you change slides, reset the timer\n      restartTimer();\n    }\n    function transitionDone(next, current) {\n      angular.extend(next, {direction: '', active: true, leaving: false, entering: false});\n      angular.extend(current||{}, {direction: '', active: false, leaving: false, entering: false});\n      $scope.$currentTransition = null;\n    }\n  };\n\n  /* Allow outside people to call indexOf on slides array */\n  self.indexOfSlide = function(slide) {\n    return slides.indexOf(slide);\n  };\n\n  $scope.next = function() {\n    var newIndex = (currentIndex + 1) % slides.length;\n\n    //Prevent this user-triggered transition from occurring if there is already one in progress\n    if (!$scope.$currentTransition) {\n      return self.select(slides[newIndex], 'next');\n    }\n  };\n\n  $scope.prev = function() {\n    var newIndex = currentIndex - 1 < 0 ? slides.length - 1 : currentIndex - 1;\n\n    //Prevent this user-triggered transition from occurring if there is already one in progress\n    if (!$scope.$currentTransition) {\n      return self.select(slides[newIndex], 'prev');\n    }\n  };\n\n  $scope.select = function(slide) {\n    self.select(slide);\n  };\n\n  $scope.isActive = function(slide) {\n     return self.currentSlide === slide;\n  };\n\n  $scope.slides = function() {\n    return slides;\n  };\n\n  $scope.$watch('interval', restartTimer);\n  function restartTimer() {\n    if (currentTimeout) {\n      $timeout.cancel(currentTimeout);\n    }\n    function go() {\n      if (isPlaying) {\n        $scope.next();\n        restartTimer();\n      } else {\n        $scope.pause();\n      }\n    }\n    var interval = +$scope.interval;\n    if (!isNaN(interval) && interval>=0) {\n      currentTimeout = $timeout(go, interval);\n    }\n  }\n  $scope.play = function() {\n    if (!isPlaying) {\n      isPlaying = true;\n      restartTimer();\n    }\n  };\n  $scope.pause = function() {\n    if (!$scope.noPause) {\n      isPlaying = false;\n      if (currentTimeout) {\n        $timeout.cancel(currentTimeout);\n      }\n    }\n  };\n\n  self.addSlide = function(slide, element) {\n    slide.$element = element;\n    slides.push(slide);\n    //if this is the first slide or the slide is set to active, select it\n    if(slides.length === 1 || slide.active) {\n      self.select(slides[slides.length-1]);\n      if (slides.length == 1) {\n        $scope.play();\n      }\n    } else {\n      slide.active = false;\n    }\n  };\n\n  self.removeSlide = function(slide) {\n    //get the index of the slide inside the carousel\n    var index = slides.indexOf(slide);\n    slides.splice(index, 1);\n    if (slides.length > 0 && slide.active) {\n      if (index >= slides.length) {\n        self.select(slides[index-1]);\n      } else {\n        self.select(slides[index]);\n      }\n    } else if (currentIndex > index) {\n      currentIndex--;\n    }\n  };\n}])\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.carousel.directive:carousel\n * @restrict EA\n *\n * @description\n * Carousel is the outer container for a set of image 'slides' to showcase.\n *\n * @param {number=} interval The time, in milliseconds, that it will take the carousel to go to the next slide.\n * @param {boolean=} noTransition Whether to disable transitions on the carousel.\n * @param {boolean=} noPause Whether to disable pausing on the carousel (by default, the carousel interval pauses on hover).\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <carousel>\n      <slide>\n        <img src=\"http://placekitten.com/150/150\" style=\"margin:auto;\">\n        <div class=\"carousel-caption\">\n          <p>Beautiful!</p>\n        </div>\n      </slide>\n      <slide>\n        <img src=\"http://placekitten.com/100/150\" style=\"margin:auto;\">\n        <div class=\"carousel-caption\">\n          <p>D'aww!</p>\n        </div>\n      </slide>\n    </carousel>\n  </file>\n  <file name=\"demo.css\">\n    .carousel-indicators {\n      top: auto;\n      bottom: 15px;\n    }\n  </file>\n</example>\n */\n.directive('carousel', [function() {\n  return {\n    restrict: 'EA',\n    transclude: true,\n    replace: true,\n    controller: 'CarouselController',\n    require: 'carousel',\n    templateUrl: 'template/carousel/carousel.html',\n    scope: {\n      interval: '=',\n      noTransition: '=',\n      noPause: '='\n    }\n  };\n}])\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.carousel.directive:slide\n * @restrict EA\n *\n * @description\n * Creates a slide inside a {@link ui.bootstrap.carousel.directive:carousel carousel}.  Must be placed as a child of a carousel element.\n *\n * @param {boolean=} active Model binding, whether or not this slide is currently active.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n<div ng-controller=\"CarouselDemoCtrl\">\n  <carousel>\n    <slide ng-repeat=\"slide in slides\" active=\"slide.active\">\n      <img ng-src=\"{{slide.image}}\" style=\"margin:auto;\">\n      <div class=\"carousel-caption\">\n        <h4>Slide {{$index}}</h4>\n        <p>{{slide.text}}</p>\n      </div>\n    </slide>\n  </carousel>\n  <div class=\"row-fluid\">\n    <div class=\"span6\">\n      <ul>\n        <li ng-repeat=\"slide in slides\">\n          <button class=\"btn btn-mini\" ng-class=\"{'btn-info': !slide.active, 'btn-success': slide.active}\" ng-disabled=\"slide.active\" ng-click=\"slide.active = true\">select</button>\n          {{$index}}: {{slide.text}}\n        </li>\n      </ul>\n      <a class=\"btn\" ng-click=\"addSlide()\">Add Slide</a>\n    </div>\n    <div class=\"span6\">\n      Interval, in milliseconds: <input type=\"number\" ng-model=\"myInterval\">\n      <br />Enter a negative number to stop the interval.\n    </div>\n  </div>\n</div>\n  </file>\n  <file name=\"script.js\">\nfunction CarouselDemoCtrl($scope) {\n  $scope.myInterval = 5000;\n  var slides = $scope.slides = [];\n  $scope.addSlide = function() {\n    var newWidth = 200 + ((slides.length + (25 * slides.length)) % 150);\n    slides.push({\n      image: 'http://placekitten.com/' + newWidth + '/200',\n      text: ['More','Extra','Lots of','Surplus'][slides.length % 4] + ' '\n        ['Cats', 'Kittys', 'Felines', 'Cutes'][slides.length % 4]\n    });\n  };\n  for (var i=0; i<4; i++) $scope.addSlide();\n}\n  </file>\n  <file name=\"demo.css\">\n    .carousel-indicators {\n      top: auto;\n      bottom: 15px;\n    }\n  </file>\n</example>\n*/\n\n.directive('slide', ['$parse', function($parse) {\n  return {\n    require: '^carousel',\n    restrict: 'EA',\n    transclude: true,\n    replace: true,\n    templateUrl: 'template/carousel/slide.html',\n    scope: {\n    },\n    link: function (scope, element, attrs, carouselCtrl) {\n      //Set up optional 'active' = binding\n      if (attrs.active) {\n        var getActive = $parse(attrs.active);\n        var setActive = getActive.assign;\n        var lastValue = scope.active = getActive(scope.$parent);\n        scope.$watch(function parentActiveWatch() {\n          var parentActive = getActive(scope.$parent);\n\n          if (parentActive !== scope.active) {\n            // we are out of sync and need to copy\n            if (parentActive !== lastValue) {\n              // parent changed and it has precedence\n              lastValue = scope.active = parentActive;\n            } else {\n              // if the parent can be assigned then do so\n              setActive(scope.$parent, parentActive = lastValue = scope.active);\n            }\n          }\n          return parentActive;\n        });\n      }\n\n      carouselCtrl.addSlide(scope, element);\n      //when the scope is destroyed then remove the slide from the current slides array\n      scope.$on('$destroy', function() {\n        carouselCtrl.removeSlide(scope);\n      });\n\n      scope.$watch('active', function(active) {\n        if (active) {\n          carouselCtrl.select(scope);\n        }\n      });\n    }\n  };\n}]);\n\nangular.module('ui.bootstrap.position', [])\n\n/**\n * A set of utility methods that can be use to retrieve position of DOM elements.\n * It is meant to be used where we need to absolute-position DOM elements in\n * relation to other, existing elements (this is the case for tooltips, popovers,\n * typeahead suggestions etc.).\n */\n  .factory('$position', ['$document', '$window', function ($document, $window) {\n\n    function getStyle(el, cssprop) {\n      if (el.currentStyle) { //IE\n        return el.currentStyle[cssprop];\n      } else if ($window.getComputedStyle) {\n        return $window.getComputedStyle(el)[cssprop];\n      }\n      // finally try and get inline style\n      return el.style[cssprop];\n    }\n\n    /**\n     * Checks if a given element is statically positioned\n     * @param element - raw DOM element\n     */\n    function isStaticPositioned(element) {\n      return (getStyle(element, \"position\") || 'static' ) === 'static';\n    }\n\n    /**\n     * returns the closest, non-statically positioned parentOffset of a given element\n     * @param element\n     */\n    var parentOffsetEl = function (element) {\n      var docDomEl = $document[0];\n      var offsetParent = element.offsetParent || docDomEl;\n      while (offsetParent && offsetParent !== docDomEl && isStaticPositioned(offsetParent) ) {\n        offsetParent = offsetParent.offsetParent;\n      }\n      return offsetParent || docDomEl;\n    };\n\n    return {\n      /**\n       * Provides read-only equivalent of jQuery's position function:\n       * http://api.jquery.com/position/\n       */\n      position: function (element) {\n        var elBCR = this.offset(element);\n        var offsetParentBCR = { top: 0, left: 0 };\n        var offsetParentEl = parentOffsetEl(element[0]);\n        if (offsetParentEl != $document[0]) {\n          offsetParentBCR = this.offset(angular.element(offsetParentEl));\n          offsetParentBCR.top += offsetParentEl.clientTop - offsetParentEl.scrollTop;\n          offsetParentBCR.left += offsetParentEl.clientLeft - offsetParentEl.scrollLeft;\n        }\n\n        return {\n          width: element.prop('offsetWidth'),\n          height: element.prop('offsetHeight'),\n          top: elBCR.top - offsetParentBCR.top,\n          left: elBCR.left - offsetParentBCR.left\n        };\n      },\n\n      /**\n       * Provides read-only equivalent of jQuery's offset function:\n       * http://api.jquery.com/offset/\n       */\n      offset: function (element) {\n        var boundingClientRect = element[0].getBoundingClientRect();\n        return {\n          width: element.prop('offsetWidth'),\n          height: element.prop('offsetHeight'),\n          top: boundingClientRect.top + ($window.pageYOffset || $document[0].body.scrollTop || $document[0].documentElement.scrollTop),\n          left: boundingClientRect.left + ($window.pageXOffset || $document[0].body.scrollLeft  || $document[0].documentElement.scrollLeft)\n        };\n      }\n    };\n  }]);\n\nangular.module('ui.bootstrap.datepicker', ['ui.bootstrap.position'])\n\n.constant('datepickerConfig', {\n  dayFormat: 'dd',\n  monthFormat: 'MMMM',\n  yearFormat: 'yyyy',\n  dayHeaderFormat: 'EEE',\n  dayTitleFormat: 'MMMM yyyy',\n  monthTitleFormat: 'yyyy',\n  showWeeks: true,\n  startingDay: 0,\n  yearRange: 20,\n  minDate: null,\n  maxDate: null\n})\n\n.controller('DatepickerController', ['$scope', '$attrs', 'dateFilter', 'datepickerConfig', function($scope, $attrs, dateFilter, dtConfig) {\n  var format = {\n    day:        getValue($attrs.dayFormat,        dtConfig.dayFormat),\n    month:      getValue($attrs.monthFormat,      dtConfig.monthFormat),\n    year:       getValue($attrs.yearFormat,       dtConfig.yearFormat),\n    dayHeader:  getValue($attrs.dayHeaderFormat,  dtConfig.dayHeaderFormat),\n    dayTitle:   getValue($attrs.dayTitleFormat,   dtConfig.dayTitleFormat),\n    monthTitle: getValue($attrs.monthTitleFormat, dtConfig.monthTitleFormat)\n  },\n  startingDay = getValue($attrs.startingDay,      dtConfig.startingDay),\n  yearRange =   getValue($attrs.yearRange,        dtConfig.yearRange);\n\n  this.minDate = dtConfig.minDate ? new Date(dtConfig.minDate) : null;\n  this.maxDate = dtConfig.maxDate ? new Date(dtConfig.maxDate) : null;\n\n  function getValue(value, defaultValue) {\n    return angular.isDefined(value) ? $scope.$parent.$eval(value) : defaultValue;\n  }\n\n  function getDaysInMonth( year, month ) {\n    return new Date(year, month, 0).getDate();\n  }\n\n  function getDates(startDate, n) {\n    var dates = new Array(n);\n    var current = startDate, i = 0;\n    while (i < n) {\n      dates[i++] = new Date(current);\n      current.setDate( current.getDate() + 1 );\n    }\n    return dates;\n  }\n\n  function makeDate(date, format, isSelected, isSecondary) {\n    return { date: date, label: dateFilter(date, format), selected: !!isSelected, secondary: !!isSecondary };\n  }\n\n  this.modes = [\n    {\n      name: 'day',\n      getVisibleDates: function(date, selected) {\n        var year = date.getFullYear(), month = date.getMonth(), firstDayOfMonth = new Date(year, month, 1);\n        var difference = startingDay - firstDayOfMonth.getDay(),\n        numDisplayedFromPreviousMonth = (difference > 0) ? 7 - difference : - difference,\n        firstDate = new Date(firstDayOfMonth), numDates = 0;\n\n        if ( numDisplayedFromPreviousMonth > 0 ) {\n          firstDate.setDate( - numDisplayedFromPreviousMonth + 1 );\n          numDates += numDisplayedFromPreviousMonth; // Previous\n        }\n        numDates += getDaysInMonth(year, month + 1); // Current\n        numDates += (7 - numDates % 7) % 7; // Next\n\n        var days = getDates(firstDate, numDates), labels = new Array(7);\n        for (var i = 0; i < numDates; i ++) {\n          var dt = new Date(days[i]);\n          days[i] = makeDate(dt, format.day, (selected && selected.getDate() === dt.getDate() && selected.getMonth() === dt.getMonth() && selected.getFullYear() === dt.getFullYear()), dt.getMonth() !== month);\n        }\n        for (var j = 0; j < 7; j++) {\n          labels[j] = dateFilter(days[j].date, format.dayHeader);\n        }\n        return { objects: days, title: dateFilter(date, format.dayTitle), labels: labels };\n      },\n      compare: function(date1, date2) {\n        return (new Date( date1.getFullYear(), date1.getMonth(), date1.getDate() ) - new Date( date2.getFullYear(), date2.getMonth(), date2.getDate() ) );\n      },\n      split: 7,\n      step: { months: 1 }\n    },\n    {\n      name: 'month',\n      getVisibleDates: function(date, selected) {\n        var months = new Array(12), year = date.getFullYear();\n        for ( var i = 0; i < 12; i++ ) {\n          var dt = new Date(year, i, 1);\n          months[i] = makeDate(dt, format.month, (selected && selected.getMonth() === i && selected.getFullYear() === year));\n        }\n        return { objects: months, title: dateFilter(date, format.monthTitle) };\n      },\n      compare: function(date1, date2) {\n        return new Date( date1.getFullYear(), date1.getMonth() ) - new Date( date2.getFullYear(), date2.getMonth() );\n      },\n      split: 3,\n      step: { years: 1 }\n    },\n    {\n      name: 'year',\n      getVisibleDates: function(date, selected) {\n        var years = new Array(yearRange), year = date.getFullYear(), startYear = parseInt((year - 1) / yearRange, 10) * yearRange + 1;\n        for ( var i = 0; i < yearRange; i++ ) {\n          var dt = new Date(startYear + i, 0, 1);\n          years[i] = makeDate(dt, format.year, (selected && selected.getFullYear() === dt.getFullYear()));\n        }\n        return { objects: years, title: [years[0].label, years[yearRange - 1].label].join(' - ') };\n      },\n      compare: function(date1, date2) {\n        return date1.getFullYear() - date2.getFullYear();\n      },\n      split: 5,\n      step: { years: yearRange }\n    }\n  ];\n\n  this.isDisabled = function(date, mode) {\n    var currentMode = this.modes[mode || 0];\n    return ((this.minDate && currentMode.compare(date, this.minDate) < 0) || (this.maxDate && currentMode.compare(date, this.maxDate) > 0) || ($scope.dateDisabled && $scope.dateDisabled({date: date, mode: currentMode.name})));\n  };\n}])\n\n.directive( 'datepicker', ['dateFilter', '$parse', 'datepickerConfig', '$log', function (dateFilter, $parse, datepickerConfig, $log) {\n  return {\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/datepicker/datepicker.html',\n    scope: {\n      dateDisabled: '&'\n    },\n    require: ['datepicker', '?^ngModel'],\n    controller: 'DatepickerController',\n    link: function(scope, element, attrs, ctrls) {\n      var datepickerCtrl = ctrls[0], ngModel = ctrls[1];\n\n      if (!ngModel) {\n        return; // do nothing if no ng-model\n      }\n\n      // Configuration parameters\n      var mode = 0, selected = new Date(), showWeeks = datepickerConfig.showWeeks;\n\n      if (attrs.showWeeks) {\n        scope.$parent.$watch($parse(attrs.showWeeks), function(value) {\n          showWeeks = !! value;\n          updateShowWeekNumbers();\n        });\n      } else {\n        updateShowWeekNumbers();\n      }\n\n      if (attrs.min) {\n        scope.$parent.$watch($parse(attrs.min), function(value) {\n          datepickerCtrl.minDate = value ? new Date(value) : null;\n          refill();\n        });\n      }\n      if (attrs.max) {\n        scope.$parent.$watch($parse(attrs.max), function(value) {\n          datepickerCtrl.maxDate = value ? new Date(value) : null;\n          refill();\n        });\n      }\n\n      function updateShowWeekNumbers() {\n        scope.showWeekNumbers = mode === 0 && showWeeks;\n      }\n\n      // Split array into smaller arrays\n      function split(arr, size) {\n        var arrays = [];\n        while (arr.length > 0) {\n          arrays.push(arr.splice(0, size));\n        }\n        return arrays;\n      }\n\n      function refill( updateSelected ) {\n        var date = null, valid = true;\n\n        if ( ngModel.$modelValue ) {\n          date = new Date( ngModel.$modelValue );\n\n          if ( isNaN(date) ) {\n            valid = false;\n            $log.error('Datepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');\n          } else if ( updateSelected ) {\n            selected = date;\n          }\n        }\n        ngModel.$setValidity('date', valid);\n\n        var currentMode = datepickerCtrl.modes[mode], data = currentMode.getVisibleDates(selected, date);\n        angular.forEach(data.objects, function(obj) {\n          obj.disabled = datepickerCtrl.isDisabled(obj.date, mode);\n        });\n\n        ngModel.$setValidity('date-disabled', (!date || !datepickerCtrl.isDisabled(date)));\n\n        scope.rows = split(data.objects, currentMode.split);\n        scope.labels = data.labels || [];\n        scope.title = data.title;\n      }\n\n      function setMode(value) {\n        mode = value;\n        updateShowWeekNumbers();\n        refill();\n      }\n\n      ngModel.$render = function() {\n        refill( true );\n      };\n\n      scope.select = function( date ) {\n        if ( mode === 0 ) {\n          var dt = new Date( ngModel.$modelValue );\n          dt.setFullYear( date.getFullYear(), date.getMonth(), date.getDate() );\n          ngModel.$setViewValue( dt );\n          refill( true );\n        } else {\n          selected = date;\n          setMode( mode - 1 );\n        }\n      };\n      scope.move = function(direction) {\n        var step = datepickerCtrl.modes[mode].step;\n        selected.setMonth( selected.getMonth() + direction * (step.months || 0) );\n        selected.setFullYear( selected.getFullYear() + direction * (step.years || 0) );\n        refill();\n      };\n      scope.toggleMode = function() {\n        setMode( (mode + 1) % datepickerCtrl.modes.length );\n      };\n      scope.getWeekNumber = function(row) {\n        return ( mode === 0 && scope.showWeekNumbers && row.length === 7 ) ? getISO8601WeekNumber(row[0].date) : null;\n      };\n\n      function getISO8601WeekNumber(date) {\n        var checkDate = new Date(date);\n        checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7)); // Thursday\n        var time = checkDate.getTime();\n        checkDate.setMonth(0); // Compare with Jan 1\n        checkDate.setDate(1);\n        return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\n      }\n    }\n  };\n}])\n\n.constant('datepickerPopupConfig', {\n  dateFormat: 'yyyy-MM-dd',\n  closeOnDateSelection: true\n})\n\n.directive('datepickerPopup', ['$compile', '$parse', '$document', '$position', 'dateFilter', 'datepickerPopupConfig',\nfunction ($compile, $parse, $document, $position, dateFilter, datepickerPopupConfig) {\n  return {\n    restrict: 'EA',\n    require: 'ngModel',\n    link: function(originalScope, element, attrs, ngModel) {\n\n      var closeOnDateSelection = angular.isDefined(attrs.closeOnDateSelection) ? scope.$eval(attrs.closeOnDateSelection) : datepickerPopupConfig.closeOnDateSelection;\n      var dateFormat = attrs.datepickerPopup || datepickerPopupConfig.dateFormat;\n\n     // create a child scope for the datepicker directive so we are not polluting original scope\n      var scope = originalScope.$new();\n      originalScope.$on('$destroy', function() {\n        scope.$destroy();\n      });\n\n      var getIsOpen, setIsOpen;\n      if ( attrs.isOpen ) {\n        getIsOpen = $parse(attrs.isOpen);\n        setIsOpen = getIsOpen.assign;\n\n        originalScope.$watch(getIsOpen, function updateOpen(value) {\n          scope.isOpen = !! value;\n        });\n      }\n      scope.isOpen = getIsOpen ? getIsOpen(originalScope) : false; // Initial state\n\n      function setOpen( value ) {\n        if (setIsOpen) {\n          setIsOpen(originalScope, !!value);\n        } else {\n          scope.isOpen = !!value;\n        }\n      }\n\n      var documentClickBind = function(event) {\n        if (scope.isOpen && event.target !== element[0]) {\n          scope.$apply(function() {\n            setOpen(false);\n          });\n        }\n      };\n\n      var elementFocusBind = function() {\n        scope.$apply(function() {\n          setOpen( true );\n        });\n      };\n\n      // popup element used to display calendar\n      var popupEl = angular.element('<datepicker-popup-wrap><datepicker></datepicker></datepicker-popup-wrap>');\n      popupEl.attr({\n        'ng-model': 'date',\n        'ng-change': 'dateSelection()'\n      });\n      var datepickerEl = popupEl.find('datepicker');\n      if (attrs.datepickerOptions) {\n        datepickerEl.attr(angular.extend({}, originalScope.$eval(attrs.datepickerOptions)));\n      }\n\n      // TODO: reverse from dateFilter string to Date object\n      function parseDate(viewValue) {\n        if (!viewValue) {\n          ngModel.$setValidity('date', true);\n          return null;\n        } else if (angular.isDate(viewValue)) {\n          ngModel.$setValidity('date', true);\n          return viewValue;\n        } else if (angular.isString(viewValue)) {\n          var date = new Date(viewValue);\n          if (isNaN(date)) {\n            ngModel.$setValidity('date', false);\n            return undefined;\n          } else {\n            ngModel.$setValidity('date', true);\n            return date;\n          }\n        } else {\n          ngModel.$setValidity('date', false);\n          return undefined;\n        }\n      }\n      ngModel.$parsers.unshift(parseDate);\n\n      // Inner change\n      scope.dateSelection = function() {\n        ngModel.$setViewValue(scope.date);\n        ngModel.$render();\n\n        if (closeOnDateSelection) {\n          setOpen( false );\n        }\n      };\n\n      element.bind('input change keyup', function() {\n        scope.$apply(function() {\n          updateCalendar();\n        });\n      });\n\n      // Outter change\n      ngModel.$render = function() {\n        var date = ngModel.$viewValue ? dateFilter(ngModel.$viewValue, dateFormat) : '';\n        element.val(date);\n\n        updateCalendar();\n      };\n\n      function updateCalendar() {\n        scope.date = ngModel.$modelValue;\n        updatePosition();\n      }\n\n      function addWatchableAttribute(attribute, scopeProperty, datepickerAttribute) {\n        if (attribute) {\n          originalScope.$watch($parse(attribute), function(value){\n            scope[scopeProperty] = value;\n          });\n          datepickerEl.attr(datepickerAttribute || scopeProperty, scopeProperty);\n        }\n      }\n      addWatchableAttribute(attrs.min, 'min');\n      addWatchableAttribute(attrs.max, 'max');\n      if (attrs.showWeeks) {\n        addWatchableAttribute(attrs.showWeeks, 'showWeeks', 'show-weeks');\n      } else {\n        scope.showWeeks = true;\n        datepickerEl.attr('show-weeks', 'showWeeks');\n      }\n      if (attrs.dateDisabled) {\n        datepickerEl.attr('date-disabled', attrs.dateDisabled);\n      }\n\n      function updatePosition() {\n        scope.position = $position.position(element);\n        scope.position.top = scope.position.top + element.prop('offsetHeight');\n      }\n\n      var documentBindingInitialized = false, elementFocusInitialized = false;\n      scope.$watch('isOpen', function(value) {\n        if (value) {\n          updatePosition();\n          $document.bind('click', documentClickBind);\n          if(elementFocusInitialized) {\n            element.unbind('focus', elementFocusBind);\n          }\n          element[0].focus();\n          documentBindingInitialized = true;\n        } else {\n          if(documentBindingInitialized) {\n            $document.unbind('click', documentClickBind);\n          }\n          element.bind('focus', elementFocusBind);\n          elementFocusInitialized = true;\n        }\n\n        if ( setIsOpen ) {\n          setIsOpen(originalScope, value);\n        }\n      });\n\n      var $setModelValue = $parse(attrs.ngModel).assign;\n\n      scope.today = function() {\n        $setModelValue(originalScope, new Date());\n      };\n      scope.clear = function() {\n        $setModelValue(originalScope, null);\n      };\n\n      element.after($compile(popupEl)(scope));\n    }\n  };\n}])\n\n.directive('datepickerPopupWrap', [function() {\n  return {\n    restrict:'E',\n    replace: true,\n    transclude: true,\n    templateUrl: 'template/datepicker/popup.html',\n    link:function (scope, element, attrs) {\n      element.bind('click', function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n      });\n    }\n  };\n}]);\n\n/*\n * dropdownToggle - Provides dropdown menu functionality in place of bootstrap js\n * @restrict class or attribute\n * @example:\n   <li class=\"dropdown\">\n     <a class=\"dropdown-toggle\">My Dropdown Menu</a>\n     <ul class=\"dropdown-menu\">\n       <li ng-repeat=\"choice in dropChoices\">\n         <a ng-href=\"{{choice.href}}\">{{choice.text}}</a>\n       </li>\n     </ul>\n   </li>\n */\n\nangular.module('ui.bootstrap.dropdownToggle', []).directive('dropdownToggle', ['$document', '$location', function ($document, $location) {\n  var openElement = null,\n      closeMenu   = angular.noop;\n  return {\n    restrict: 'CA',\n    link: function(scope, element, attrs) {\n      scope.$watch('$location.path', function() { closeMenu(); });\n      element.parent().bind('click', function() { closeMenu(); });\n      element.bind('click', function (event) {\n\n        var elementWasOpen = (element === openElement);\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (!!openElement) {\n          closeMenu();\n        }\n\n        if (!elementWasOpen) {\n          element.parent().addClass('open');\n          openElement = element;\n          closeMenu = function (event) {\n            if (event) {\n              event.preventDefault();\n              event.stopPropagation();\n            }\n            $document.unbind('click', closeMenu);\n            element.parent().removeClass('open');\n            closeMenu = angular.noop;\n            openElement = null;\n          };\n          $document.bind('click', closeMenu);\n        }\n      });\n    }\n  };\n}]);\nangular.module('ui.bootstrap.modal', [])\n\n/**\n * A helper, internal data structure that acts as a map but also allows getting / removing\n * elements in the LIFO order\n */\n  .factory('$$stackedMap', function () {\n    return {\n      createNew: function () {\n        var stack = [];\n\n        return {\n          add: function (key, value) {\n            stack.push({\n              key: key,\n              value: value\n            });\n          },\n          get: function (key) {\n            for (var i = 0; i < stack.length; i++) {\n              if (key == stack[i].key) {\n                return stack[i];\n              }\n            }\n          },\n          keys: function() {\n            var keys = [];\n            for (var i = 0; i < stack.length; i++) {\n              keys.push(stack[i].key);\n            }\n            return keys;\n          },\n          top: function () {\n            return stack[stack.length - 1];\n          },\n          remove: function (key) {\n            var idx = -1;\n            for (var i = 0; i < stack.length; i++) {\n              if (key == stack[i].key) {\n                idx = i;\n                break;\n              }\n            }\n            return stack.splice(idx, 1)[0];\n          },\n          removeTop: function () {\n            return stack.splice(stack.length - 1, 1)[0];\n          },\n          length: function () {\n            return stack.length;\n          }\n        };\n      }\n    };\n  })\n\n/**\n * A helper directive for the $modal service. It creates a backdrop element.\n */\n  .directive('modalBackdrop', ['$modalStack', '$timeout', function ($modalStack, $timeout) {\n    return {\n      restrict: 'EA',\n      replace: true,\n      templateUrl: 'template/modal/backdrop.html',\n      link: function (scope, element, attrs) {\n\n        //trigger CSS transitions\n        $timeout(function () {\n          scope.animate = true;\n        });\n\n        scope.close = function (evt) {\n          var modal = $modalStack.getTop();\n          if (modal && modal.value.backdrop && modal.value.backdrop != 'static') {\n            evt.preventDefault();\n            evt.stopPropagation();\n            $modalStack.dismiss(modal.key, 'backdrop click');\n          }\n        };\n      }\n    };\n  }])\n\n  .directive('modalWindow', ['$timeout', function ($timeout) {\n    return {\n      restrict: 'EA',\n      scope: {\n        index: '@'\n      },\n      replace: true,\n      transclude: true,\n      templateUrl: 'template/modal/window.html',\n      link: function (scope, element, attrs) {\n        scope.windowClass = attrs.windowClass || '';\n\n        //trigger CSS transitions\n        $timeout(function () {\n          scope.animate = true;\n        });\n      }\n    };\n  }])\n\n  .factory('$modalStack', ['$document', '$compile', '$rootScope', '$$stackedMap',\n    function ($document, $compile, $rootScope, $$stackedMap) {\n\n      var backdropjqLiteEl, backdropDomEl;\n      var backdropScope = $rootScope.$new(true);\n      var body = $document.find('body').eq(0);\n      var openedWindows = $$stackedMap.createNew();\n      var $modalStack = {};\n\n      function backdropIndex() {\n        var topBackdropIndex = -1;\n        var opened = openedWindows.keys();\n        for (var i = 0; i < opened.length; i++) {\n          if (openedWindows.get(opened[i]).value.backdrop) {\n            topBackdropIndex = i;\n          }\n        }\n        return topBackdropIndex;\n      }\n\n      $rootScope.$watch(backdropIndex, function(newBackdropIndex){\n        backdropScope.index = newBackdropIndex;\n      });\n\n      function removeModalWindow(modalInstance) {\n\n        var modalWindow = openedWindows.get(modalInstance).value;\n\n        //clean up the stack\n        openedWindows.remove(modalInstance);\n\n        //remove window DOM element\n        modalWindow.modalDomEl.remove();\n\n        //remove backdrop if no longer needed\n        if (backdropIndex() == -1) {\n          backdropDomEl.remove();\n          backdropDomEl = undefined;\n        }\n\n        //destroy scope\n        modalWindow.modalScope.$destroy();\n      }\n\n      $document.bind('keydown', function (evt) {\n        var modal;\n\n        if (evt.which === 27) {\n          modal = openedWindows.top();\n          if (modal && modal.value.keyboard) {\n            $rootScope.$apply(function () {\n              $modalStack.dismiss(modal.key);\n            });\n          }\n        }\n      });\n\n      $modalStack.open = function (modalInstance, modal) {\n\n        openedWindows.add(modalInstance, {\n          deferred: modal.deferred,\n          modalScope: modal.scope,\n          backdrop: modal.backdrop,\n          keyboard: modal.keyboard\n        });\n\n        var angularDomEl = angular.element('<div modal-window></div>');\n        angularDomEl.attr('window-class', modal.windowClass);\n        angularDomEl.attr('index', openedWindows.length() - 1);\n        angularDomEl.html(modal.content);\n\n        var modalDomEl = $compile(angularDomEl)(modal.scope);\n        openedWindows.top().value.modalDomEl = modalDomEl;\n        body.append(modalDomEl);\n\n        if (backdropIndex() >= 0 && !backdropDomEl) {\n            backdropjqLiteEl = angular.element('<div modal-backdrop></div>');\n            backdropDomEl = $compile(backdropjqLiteEl)(backdropScope);\n            body.append(backdropDomEl);\n        }\n      };\n\n      $modalStack.close = function (modalInstance, result) {\n        var modal = openedWindows.get(modalInstance);\n        if (modal) {\n          modal.value.deferred.resolve(result);\n          removeModalWindow(modalInstance);\n        }\n      };\n\n      $modalStack.dismiss = function (modalInstance, reason) {\n        var modalWindow = openedWindows.get(modalInstance).value;\n        if (modalWindow) {\n          modalWindow.deferred.reject(reason);\n          removeModalWindow(modalInstance);\n        }\n      };\n\n      $modalStack.getTop = function () {\n        return openedWindows.top();\n      };\n\n      return $modalStack;\n    }])\n\n  .provider('$modal', function () {\n\n    var $modalProvider = {\n      options: {\n        backdrop: true, //can be also false or 'static'\n        keyboard: true\n      },\n      $get: ['$injector', '$rootScope', '$q', '$http', '$templateCache', '$controller', '$modalStack',\n        function ($injector, $rootScope, $q, $http, $templateCache, $controller, $modalStack) {\n\n          var $modal = {};\n\n          function getTemplatePromise(options) {\n            return options.template ? $q.when(options.template) :\n              $http.get(options.templateUrl, {cache: $templateCache}).then(function (result) {\n                return result.data;\n              });\n          }\n\n          function getResolvePromises(resolves) {\n            var promisesArr = [];\n            angular.forEach(resolves, function (value, key) {\n              if (angular.isFunction(value) || angular.isArray(value)) {\n                promisesArr.push($q.when($injector.invoke(value)));\n              }\n            });\n            return promisesArr;\n          }\n\n          $modal.open = function (modalOptions) {\n\n            var modalResultDeferred = $q.defer();\n            var modalOpenedDeferred = $q.defer();\n\n            //prepare an instance of a modal to be injected into controllers and returned to a caller\n            var modalInstance = {\n              result: modalResultDeferred.promise,\n              opened: modalOpenedDeferred.promise,\n              close: function (result) {\n                $modalStack.close(modalInstance, result);\n              },\n              dismiss: function (reason) {\n                $modalStack.dismiss(modalInstance, reason);\n              }\n            };\n\n            //merge and clean up options\n            modalOptions = angular.extend({}, $modalProvider.options, modalOptions);\n            modalOptions.resolve = modalOptions.resolve || {};\n\n            //verify options\n            if (!modalOptions.template && !modalOptions.templateUrl) {\n              throw new Error('One of template or templateUrl options is required.');\n            }\n\n            var templateAndResolvePromise =\n              $q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));\n\n\n            templateAndResolvePromise.then(function resolveSuccess(tplAndVars) {\n\n              var modalScope = (modalOptions.scope || $rootScope).$new();\n              modalScope.$close = modalInstance.close;\n              modalScope.$dismiss = modalInstance.dismiss;\n\n              var ctrlInstance, ctrlLocals = {};\n              var resolveIter = 1;\n\n              //controllers\n              if (modalOptions.controller) {\n                ctrlLocals.$scope = modalScope;\n                ctrlLocals.$modalInstance = modalInstance;\n                angular.forEach(modalOptions.resolve, function (value, key) {\n                  ctrlLocals[key] = tplAndVars[resolveIter++];\n                });\n\n                ctrlInstance = $controller(modalOptions.controller, ctrlLocals);\n              }\n\n              $modalStack.open(modalInstance, {\n                scope: modalScope,\n                deferred: modalResultDeferred,\n                content: tplAndVars[0],\n                backdrop: modalOptions.backdrop,\n                keyboard: modalOptions.keyboard,\n                windowClass: modalOptions.windowClass\n              });\n\n            }, function resolveError(reason) {\n              modalResultDeferred.reject(reason);\n            });\n\n            templateAndResolvePromise.then(function () {\n              modalOpenedDeferred.resolve(true);\n            }, function () {\n              modalOpenedDeferred.reject(false);\n            });\n\n            return modalInstance;\n          };\n\n          return $modal;\n        }]\n    };\n\n    return $modalProvider;\n  });\nangular.module('ui.bootstrap.pagination', [])\n\n.controller('PaginationController', ['$scope', '$attrs', '$parse', '$interpolate', function ($scope, $attrs, $parse, $interpolate) {\n  var self = this;\n\n  this.init = function(defaultItemsPerPage) {\n    if ($attrs.itemsPerPage) {\n      $scope.$parent.$watch($parse($attrs.itemsPerPage), function(value) {\n        self.itemsPerPage = parseInt(value, 10);\n        $scope.totalPages = self.calculateTotalPages();\n      });\n    } else {\n      this.itemsPerPage = defaultItemsPerPage;\n    }\n  };\n\n  this.noPrevious = function() {\n    return this.page === 1;\n  };\n  this.noNext = function() {\n    return this.page === $scope.totalPages;\n  };\n\n  this.isActive = function(page) {\n    return this.page === page;\n  };\n\n  this.calculateTotalPages = function() {\n    return this.itemsPerPage < 1 ? 1 : Math.ceil($scope.totalItems / this.itemsPerPage);\n  };\n\n  this.getAttributeValue = function(attribute, defaultValue, interpolate) {\n    return angular.isDefined(attribute) ? (interpolate ? $interpolate(attribute)($scope.$parent) : $scope.$parent.$eval(attribute)) : defaultValue;\n  };\n\n  this.render = function() {\n    this.page = parseInt($scope.page, 10) || 1;\n    $scope.pages = this.getPages(this.page, $scope.totalPages);\n  };\n\n  $scope.selectPage = function(page) {\n    if ( ! self.isActive(page) && page > 0 && page <= $scope.totalPages) {\n      $scope.page = page;\n      $scope.onSelectPage({ page: page });\n    }\n  };\n\n  $scope.$watch('totalItems', function() {\n    $scope.totalPages = self.calculateTotalPages();\n  });\n\n  $scope.$watch('totalPages', function(value) {\n    if ( $attrs.numPages ) {\n      $scope.numPages = value; // Readonly variable\n    }\n\n    if ( self.page > value ) {\n      $scope.selectPage(value);\n    } else {\n      self.render();\n    }\n  });\n\n  $scope.$watch('page', function() {\n    self.render();\n  });\n}])\n\n.constant('paginationConfig', {\n  itemsPerPage: 10,\n  boundaryLinks: false,\n  directionLinks: true,\n  firstText: 'First',\n  previousText: 'Previous',\n  nextText: 'Next',\n  lastText: 'Last',\n  rotate: true\n})\n\n.directive('pagination', ['$parse', 'paginationConfig', function($parse, config) {\n  return {\n    restrict: 'EA',\n    scope: {\n      page: '=',\n      totalItems: '=',\n      onSelectPage:' &',\n      numPages: '='\n    },\n    controller: 'PaginationController',\n    templateUrl: 'template/pagination/pagination.html',\n    replace: true,\n    link: function(scope, element, attrs, paginationCtrl) {\n\n      // Setup configuration parameters\n      var maxSize,\n      boundaryLinks  = paginationCtrl.getAttributeValue(attrs.boundaryLinks,  config.boundaryLinks      ),\n      directionLinks = paginationCtrl.getAttributeValue(attrs.directionLinks, config.directionLinks     ),\n      firstText      = paginationCtrl.getAttributeValue(attrs.firstText,      config.firstText,     true),\n      previousText   = paginationCtrl.getAttributeValue(attrs.previousText,   config.previousText,  true),\n      nextText       = paginationCtrl.getAttributeValue(attrs.nextText,       config.nextText,      true),\n      lastText       = paginationCtrl.getAttributeValue(attrs.lastText,       config.lastText,      true),\n      rotate         = paginationCtrl.getAttributeValue(attrs.rotate,         config.rotate);\n\n      paginationCtrl.init(config.itemsPerPage);\n\n      if (attrs.maxSize) {\n        scope.$parent.$watch($parse(attrs.maxSize), function(value) {\n          maxSize = parseInt(value, 10);\n          paginationCtrl.render();\n        });\n      }\n\n      // Create page object used in template\n      function makePage(number, text, isActive, isDisabled) {\n        return {\n          number: number,\n          text: text,\n          active: isActive,\n          disabled: isDisabled\n        };\n      }\n\n      paginationCtrl.getPages = function(currentPage, totalPages) {\n        var pages = [];\n\n        // Default page limits\n        var startPage = 1, endPage = totalPages;\n        var isMaxSized = ( angular.isDefined(maxSize) && maxSize < totalPages );\n\n        // recompute if maxSize\n        if ( isMaxSized ) {\n          if ( rotate ) {\n            // Current page is displayed in the middle of the visible ones\n            startPage = Math.max(currentPage - Math.floor(maxSize/2), 1);\n            endPage   = startPage + maxSize - 1;\n\n            // Adjust if limit is exceeded\n            if (endPage > totalPages) {\n              endPage   = totalPages;\n              startPage = endPage - maxSize + 1;\n            }\n          } else {\n            // Visible pages are paginated with maxSize\n            startPage = ((Math.ceil(currentPage / maxSize) - 1) * maxSize) + 1;\n\n            // Adjust last page if limit is exceeded\n            endPage = Math.min(startPage + maxSize - 1, totalPages);\n          }\n        }\n\n        // Add page number links\n        for (var number = startPage; number <= endPage; number++) {\n          var page = makePage(number, number, paginationCtrl.isActive(number), false);\n          pages.push(page);\n        }\n\n        // Add links to move between page sets\n        if ( isMaxSized && ! rotate ) {\n          if ( startPage > 1 ) {\n            var previousPageSet = makePage(startPage - 1, '...', false, false);\n            pages.unshift(previousPageSet);\n          }\n\n          if ( endPage < totalPages ) {\n            var nextPageSet = makePage(endPage + 1, '...', false, false);\n            pages.push(nextPageSet);\n          }\n        }\n\n        // Add previous & next links\n        if (directionLinks) {\n          var previousPage = makePage(currentPage - 1, previousText, false, paginationCtrl.noPrevious());\n          pages.unshift(previousPage);\n\n          var nextPage = makePage(currentPage + 1, nextText, false, paginationCtrl.noNext());\n          pages.push(nextPage);\n        }\n\n        // Add first & last links\n        if (boundaryLinks) {\n          var firstPage = makePage(1, firstText, false, paginationCtrl.noPrevious());\n          pages.unshift(firstPage);\n\n          var lastPage = makePage(totalPages, lastText, false, paginationCtrl.noNext());\n          pages.push(lastPage);\n        }\n\n        return pages;\n      };\n    }\n  };\n}])\n\n.constant('pagerConfig', {\n  itemsPerPage: 10,\n  previousText: ' Previous',\n  nextText: 'Next ',\n  align: true\n})\n\n.directive('pager', ['pagerConfig', function(config) {\n  return {\n    restrict: 'EA',\n    scope: {\n      page: '=',\n      totalItems: '=',\n      onSelectPage:' &',\n      numPages: '='\n    },\n    controller: 'PaginationController',\n    templateUrl: 'template/pagination/pager.html',\n    replace: true,\n    link: function(scope, element, attrs, paginationCtrl) {\n\n      // Setup configuration parameters\n      var previousText = paginationCtrl.getAttributeValue(attrs.previousText, config.previousText, true),\n      nextText         = paginationCtrl.getAttributeValue(attrs.nextText,     config.nextText,     true),\n      align            = paginationCtrl.getAttributeValue(attrs.align,        config.align);\n\n      paginationCtrl.init(config.itemsPerPage);\n\n      // Create page object used in template\n      function makePage(number, text, isDisabled, isPrevious, isNext) {\n        return {\n          number: number,\n          text: text,\n          disabled: isDisabled,\n          previous: ( align && isPrevious ),\n          next: ( align && isNext )\n        };\n      }\n\n      paginationCtrl.getPages = function(currentPage) {\n        return [\n          makePage(currentPage - 1, previousText, paginationCtrl.noPrevious(), true, false),\n          makePage(currentPage + 1, nextText, paginationCtrl.noNext(), false, true)\n        ];\n      };\n    }\n  };\n}]);\n\n/**\n * The following features are still outstanding: animation as a\n * function, placement as a function, inside, support for more triggers than\n * just mouse enter/leave, html tooltips, and selector delegation.\n */\nangular.module( 'ui.bootstrap.tooltip', [ 'ui.bootstrap.position', 'ui.bootstrap.bindHtml' ] )\n\n/**\n * The $tooltip service creates tooltip- and popover-like directives as well as\n * houses global options for them.\n */\n.provider( '$tooltip', function () {\n  // The default options tooltip and popover.\n  var defaultOptions = {\n    placement: 'top',\n    animation: true,\n    popupDelay: 0\n  };\n\n  // Default hide triggers for each show trigger\n  var triggerMap = {\n    'mouseenter': 'mouseleave',\n    'click': 'click',\n    'focus': 'blur'\n  };\n\n  // The options specified to the provider globally.\n  var globalOptions = {};\n  \n  /**\n   * `options({})` allows global configuration of all tooltips in the\n   * application.\n   *\n   *   var app = angular.module( 'App', ['ui.bootstrap.tooltip'], function( $tooltipProvider ) {\n   *     // place tooltips left instead of top by default\n   *     $tooltipProvider.options( { placement: 'left' } );\n   *   });\n   */\n\tthis.options = function( value ) {\n\t\tangular.extend( globalOptions, value );\n\t};\n\n  /**\n   * This allows you to extend the set of trigger mappings available. E.g.:\n   *\n   *   $tooltipProvider.setTriggers( 'openTrigger': 'closeTrigger' );\n   */\n  this.setTriggers = function setTriggers ( triggers ) {\n    angular.extend( triggerMap, triggers );\n  };\n\n  /**\n   * This is a helper function for translating camel-case to snake-case.\n   */\n  function snake_case(name){\n    var regexp = /[A-Z]/g;\n    var separator = '-';\n    return name.replace(regexp, function(letter, pos) {\n      return (pos ? separator : '') + letter.toLowerCase();\n    });\n  }\n\n  /**\n   * Returns the actual instance of the $tooltip service.\n   * TODO support multiple triggers\n   */\n  this.$get = [ '$window', '$compile', '$timeout', '$parse', '$document', '$position', '$interpolate', function ( $window, $compile, $timeout, $parse, $document, $position, $interpolate ) {\n    return function $tooltip ( type, prefix, defaultTriggerShow ) {\n      var options = angular.extend( {}, defaultOptions, globalOptions );\n\n      /**\n       * Returns an object of show and hide triggers.\n       *\n       * If a trigger is supplied,\n       * it is used to show the tooltip; otherwise, it will use the `trigger`\n       * option passed to the `$tooltipProvider.options` method; else it will\n       * default to the trigger supplied to this directive factory.\n       *\n       * The hide trigger is based on the show trigger. If the `trigger` option\n       * was passed to the `$tooltipProvider.options` method, it will use the\n       * mapped trigger from `triggerMap` or the passed trigger if the map is\n       * undefined; otherwise, it uses the `triggerMap` value of the show\n       * trigger; else it will just use the show trigger.\n       */\n      function getTriggers ( trigger ) {\n        var show = trigger || options.trigger || defaultTriggerShow;\n        var hide = triggerMap[show] || show;\n        return {\n          show: show,\n          hide: hide\n        };\n      }\n\n      var directiveName = snake_case( type );\n\n      var startSym = $interpolate.startSymbol();\n      var endSym = $interpolate.endSymbol();\n      var template = \n        '<'+ directiveName +'-popup '+\n          'title=\"'+startSym+'tt_title'+endSym+'\" '+\n          'content=\"'+startSym+'tt_content'+endSym+'\" '+\n          'placement=\"'+startSym+'tt_placement'+endSym+'\" '+\n          'animation=\"tt_animation()\" '+\n          'is-open=\"tt_isOpen\"'+\n          '>'+\n        '</'+ directiveName +'-popup>';\n\n      return {\n        restrict: 'EA',\n        scope: true,\n        link: function link ( scope, element, attrs ) {\n          var tooltip = $compile( template )( scope );\n          var transitionTimeout;\n          var popupTimeout;\n          var $body;\n          var appendToBody = angular.isDefined( options.appendToBody ) ? options.appendToBody : false;\n          var triggers = getTriggers( undefined );\n          var hasRegisteredTriggers = false;\n\n          // By default, the tooltip is not open.\n          // TODO add ability to start tooltip opened\n          scope.tt_isOpen = false;\n\n          function toggleTooltipBind () {\n            if ( ! scope.tt_isOpen ) {\n              showTooltipBind();\n            } else {\n              hideTooltipBind();\n            }\n          }\n          \n          // Show the tooltip with delay if specified, otherwise show it immediately\n          function showTooltipBind() {\n            if ( scope.tt_popupDelay ) {\n              popupTimeout = $timeout( show, scope.tt_popupDelay );\n            } else {\n              scope.$apply( show );\n            }\n          }\n\n          function hideTooltipBind () {\n            scope.$apply(function () {\n              hide();\n            });\n          }\n          \n          // Show the tooltip popup element.\n          function show() {\n            var position,\n                ttWidth,\n                ttHeight,\n                ttPosition;\n\n            // Don't show empty tooltips.\n            if ( ! scope.tt_content ) {\n              return;\n            }\n\n            // If there is a pending remove transition, we must cancel it, lest the\n            // tooltip be mysteriously removed.\n            if ( transitionTimeout ) {\n              $timeout.cancel( transitionTimeout );\n            }\n            \n            // Set the initial positioning.\n            tooltip.css({ top: 0, left: 0, display: 'block' });\n            \n            // Now we add it to the DOM because need some info about it. But it's not \n            // visible yet anyway.\n            if ( appendToBody ) {\n                $body = $body || $document.find( 'body' );\n                $body.append( tooltip );\n            } else {\n              element.after( tooltip );\n            }\n\n            // Get the position of the directive element.\n            position = appendToBody ? $position.offset( element ) : $position.position( element );\n\n            // Get the height and width of the tooltip so we can center it.\n            ttWidth = tooltip.prop( 'offsetWidth' );\n            ttHeight = tooltip.prop( 'offsetHeight' );\n            \n            // Calculate the tooltip's top and left coordinates to center it with\n            // this directive.\n            switch ( scope.tt_placement ) {\n              case 'right':\n                ttPosition = {\n                  top: position.top + position.height / 2 - ttHeight / 2,\n                  left: position.left + position.width\n                };\n                break;\n              case 'bottom':\n                ttPosition = {\n                  top: position.top + position.height,\n                  left: position.left + position.width / 2 - ttWidth / 2\n                };\n                break;\n              case 'left':\n                ttPosition = {\n                  top: position.top + position.height / 2 - ttHeight / 2,\n                  left: position.left - ttWidth\n                };\n                break;\n              default:\n                ttPosition = {\n                  top: position.top - ttHeight,\n                  left: position.left + position.width / 2 - ttWidth / 2\n                };\n                break;\n            }\n\n            ttPosition.top += 'px';\n            ttPosition.left += 'px';\n\n            // Now set the calculated positioning.\n            tooltip.css( ttPosition );\n              \n            // And show the tooltip.\n            scope.tt_isOpen = true;\n          }\n          \n          // Hide the tooltip popup element.\n          function hide() {\n            // First things first: we don't show it anymore.\n            scope.tt_isOpen = false;\n\n            //if tooltip is going to be shown after delay, we must cancel this\n            $timeout.cancel( popupTimeout );\n            \n            // And now we remove it from the DOM. However, if we have animation, we \n            // need to wait for it to expire beforehand.\n            // FIXME: this is a placeholder for a port of the transitions library.\n            if ( angular.isDefined( scope.tt_animation ) && scope.tt_animation() ) {\n              transitionTimeout = $timeout( function () { tooltip.remove(); }, 500 );\n            } else {\n              tooltip.remove();\n            }\n          }\n\n          /**\n           * Observe the relevant attributes.\n           */\n          attrs.$observe( type, function ( val ) {\n            scope.tt_content = val;\n          });\n\n          attrs.$observe( prefix+'Title', function ( val ) {\n            scope.tt_title = val;\n          });\n\n          attrs.$observe( prefix+'Placement', function ( val ) {\n            scope.tt_placement = angular.isDefined( val ) ? val : options.placement;\n          });\n\n          attrs.$observe( prefix+'Animation', function ( val ) {\n            scope.tt_animation = angular.isDefined( val ) ? $parse( val ) : function(){ return options.animation; };\n          });\n\n          attrs.$observe( prefix+'PopupDelay', function ( val ) {\n            var delay = parseInt( val, 10 );\n            scope.tt_popupDelay = ! isNaN(delay) ? delay : options.popupDelay;\n          });\n\n          attrs.$observe( prefix+'Trigger', function ( val ) {\n\n            if (hasRegisteredTriggers) {\n              element.unbind( triggers.show, showTooltipBind );\n              element.unbind( triggers.hide, hideTooltipBind );\n            }\n\n            triggers = getTriggers( val );\n\n            if ( triggers.show === triggers.hide ) {\n              element.bind( triggers.show, toggleTooltipBind );\n            } else {\n              element.bind( triggers.show, showTooltipBind );\n              element.bind( triggers.hide, hideTooltipBind );\n            }\n\n            hasRegisteredTriggers = true;\n          });\n\n          attrs.$observe( prefix+'AppendToBody', function ( val ) {\n            appendToBody = angular.isDefined( val ) ? $parse( val )( scope ) : appendToBody;\n          });\n\n          // if a tooltip is attached to <body> we need to remove it on\n          // location change as its parent scope will probably not be destroyed\n          // by the change.\n          if ( appendToBody ) {\n            scope.$on('$locationChangeSuccess', function closeTooltipOnLocationChangeSuccess () {\n            if ( scope.tt_isOpen ) {\n              hide();\n            }\n          });\n          }\n\n          // Make sure tooltip is destroyed and removed.\n          scope.$on('$destroy', function onDestroyTooltip() {\n            if ( scope.tt_isOpen ) {\n              hide();\n            } else {\n              tooltip.remove();\n            }\n          });\n        }\n      };\n    };\n  }];\n})\n\n.directive( 'tooltipPopup', function () {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: { content: '@', placement: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/tooltip/tooltip-popup.html'\n  };\n})\n\n.directive( 'tooltip', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip( 'tooltip', 'tooltip', 'mouseenter' );\n}])\n\n.directive( 'tooltipHtmlUnsafePopup', function () {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: { content: '@', placement: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/tooltip/tooltip-html-unsafe-popup.html'\n  };\n})\n\n.directive( 'tooltipHtmlUnsafe', [ '$tooltip', function ( $tooltip ) {\n  return $tooltip( 'tooltipHtmlUnsafe', 'tooltip', 'mouseenter' );\n}]);\n\n/**\n * The following features are still outstanding: popup delay, animation as a\n * function, placement as a function, inside, support for more triggers than\n * just mouse enter/leave, html popovers, and selector delegatation.\n */\nangular.module( 'ui.bootstrap.popover', [ 'ui.bootstrap.tooltip' ] )\n.directive( 'popoverPopup', function () {\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { title: '@', content: '@', placement: '@', animation: '&', isOpen: '&' },\n    templateUrl: 'template/popover/popover.html'\n  };\n})\n.directive( 'popover', [ '$compile', '$timeout', '$parse', '$window', '$tooltip', function ( $compile, $timeout, $parse, $window, $tooltip ) {\n  return $tooltip( 'popover', 'popover', 'click' );\n}]);\n\n\nangular.module('ui.bootstrap.progressbar', ['ui.bootstrap.transition'])\n\n.constant('progressConfig', {\n  animate: true,\n  autoType: false,\n  stackedTypes: ['success', 'info', 'warning', 'danger']\n})\n\n.controller('ProgressBarController', ['$scope', '$attrs', 'progressConfig', function($scope, $attrs, progressConfig) {\n\n    // Whether bar transitions should be animated\n    var animate = angular.isDefined($attrs.animate) ? $scope.$eval($attrs.animate) : progressConfig.animate;\n    var autoType = angular.isDefined($attrs.autoType) ? $scope.$eval($attrs.autoType) : progressConfig.autoType;\n    var stackedTypes = angular.isDefined($attrs.stackedTypes) ? $scope.$eval('[' + $attrs.stackedTypes + ']') : progressConfig.stackedTypes;\n\n    // Create bar object\n    this.makeBar = function(newBar, oldBar, index) {\n        var newValue = (angular.isObject(newBar)) ? newBar.value : (newBar || 0);\n        var oldValue =  (angular.isObject(oldBar)) ? oldBar.value : (oldBar || 0);\n        var type = (angular.isObject(newBar) && angular.isDefined(newBar.type)) ? newBar.type : (autoType) ? getStackedType(index || 0) : null;\n\n        return {\n            from: oldValue,\n            to: newValue,\n            type: type,\n            animate: animate\n        };\n    };\n\n    function getStackedType(index) {\n        return stackedTypes[index];\n    }\n\n    this.addBar = function(bar) {\n        $scope.bars.push(bar);\n        $scope.totalPercent += bar.to;\n    };\n\n    this.clearBars = function() {\n        $scope.bars = [];\n        $scope.totalPercent = 0;\n    };\n    this.clearBars();\n}])\n\n.directive('progress', function() {\n    return {\n        restrict: 'EA',\n        replace: true,\n        controller: 'ProgressBarController',\n        scope: {\n            value: '=percent',\n            onFull: '&',\n            onEmpty: '&'\n        },\n        templateUrl: 'template/progressbar/progress.html',\n        link: function(scope, element, attrs, controller) {\n            scope.$watch('value', function(newValue, oldValue) {\n                controller.clearBars();\n\n                if (angular.isArray(newValue)) {\n                    // Stacked progress bar\n                    for (var i=0, n=newValue.length; i < n; i++) {\n                        controller.addBar(controller.makeBar(newValue[i], oldValue[i], i));\n                    }\n                } else {\n                    // Simple bar\n                    controller.addBar(controller.makeBar(newValue, oldValue));\n                }\n            }, true);\n\n            // Total percent listeners\n            scope.$watch('totalPercent', function(value) {\n              if (value >= 100) {\n                scope.onFull();\n              } else if (value <= 0) {\n                scope.onEmpty();\n              }\n            }, true);\n        }\n    };\n})\n\n.directive('progressbar', ['$transition', function($transition) {\n    return {\n        restrict: 'EA',\n        replace: true,\n        scope: {\n            width: '=',\n            old: '=',\n            type: '=',\n            animate: '='\n        },\n        templateUrl: 'template/progressbar/bar.html',\n        link: function(scope, element) {\n            scope.$watch('width', function(value) {\n                if (scope.animate) {\n                    element.css('width', scope.old + '%');\n                    $transition(element, {width: value + '%'});\n                } else {\n                    element.css('width', value + '%');\n                }\n            });\n        }\n    };\n}]);\nangular.module('ui.bootstrap.rating', [])\n\n.constant('ratingConfig', {\n  max: 5,\n  stateOn: null,\n  stateOff: null\n})\n\n.controller('RatingController', ['$scope', '$attrs', '$parse', 'ratingConfig', function($scope, $attrs, $parse, ratingConfig) {\n\n  this.maxRange = angular.isDefined($attrs.max) ? $scope.$parent.$eval($attrs.max) : ratingConfig.max;\n  this.stateOn = angular.isDefined($attrs.stateOn) ? $scope.$parent.$eval($attrs.stateOn) : ratingConfig.stateOn;\n  this.stateOff = angular.isDefined($attrs.stateOff) ? $scope.$parent.$eval($attrs.stateOff) : ratingConfig.stateOff;\n\n  this.createDefaultRange = function(len) {\n    var defaultStateObject = {\n      stateOn: this.stateOn,\n      stateOff: this.stateOff\n    };\n\n    var states = new Array(len);\n    for (var i = 0; i < len; i++) {\n      states[i] = defaultStateObject;\n    }\n    return states;\n  };\n\n  this.normalizeRange = function(states) {\n    for (var i = 0, n = states.length; i < n; i++) {\n      states[i].stateOn = states[i].stateOn || this.stateOn;\n      states[i].stateOff = states[i].stateOff || this.stateOff;\n    }\n    return states;\n  };\n\n  // Get objects used in template\n  $scope.range = angular.isDefined($attrs.ratingStates) ?  this.normalizeRange(angular.copy($scope.$parent.$eval($attrs.ratingStates))): this.createDefaultRange(this.maxRange);\n\n  $scope.rate = function(value) {\n    if ( $scope.readonly || $scope.value === value) {\n      return;\n    }\n\n    $scope.value = value;\n  };\n\n  $scope.enter = function(value) {\n    if ( ! $scope.readonly ) {\n      $scope.val = value;\n    }\n    $scope.onHover({value: value});\n  };\n\n  $scope.reset = function() {\n    $scope.val = angular.copy($scope.value);\n    $scope.onLeave();\n  };\n\n  $scope.$watch('value', function(value) {\n    $scope.val = value;\n  });\n\n  $scope.readonly = false;\n  if ($attrs.readonly) {\n    $scope.$parent.$watch($parse($attrs.readonly), function(value) {\n      $scope.readonly = !!value;\n    });\n  }\n}])\n\n.directive('rating', function() {\n  return {\n    restrict: 'EA',\n    scope: {\n      value: '=',\n      onHover: '&',\n      onLeave: '&'\n    },\n    controller: 'RatingController',\n    templateUrl: 'template/rating/rating.html',\n    replace: true\n  };\n});\n\n/**\n * @ngdoc overview\n * @name ui.bootstrap.tabs\n *\n * @description\n * AngularJS version of the tabs directive.\n */\n\nangular.module('ui.bootstrap.tabs', [])\n\n.directive('tabs', function() {\n  return function() {\n    throw new Error(\"The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md\");\n  };\n})\n\n.controller('TabsetController', ['$scope', '$element',\nfunction TabsetCtrl($scope, $element) {\n\n  var ctrl = this,\n    tabs = ctrl.tabs = $scope.tabs = [];\n\n  ctrl.select = function(tab) {\n    angular.forEach(tabs, function(tab) {\n      tab.active = false;\n    });\n    tab.active = true;\n  };\n\n  ctrl.addTab = function addTab(tab) {\n    tabs.push(tab);\n    if (tabs.length === 1 || tab.active) {\n      ctrl.select(tab);\n    }\n  };\n\n  ctrl.removeTab = function removeTab(tab) {\n    var index = tabs.indexOf(tab);\n    //Select a new tab if the tab to be removed is selected\n    if (tab.active && tabs.length > 1) {\n      //If this is the last tab, select the previous tab. else, the next tab.\n      var newActiveIndex = index == tabs.length - 1 ? index - 1 : index + 1;\n      ctrl.select(tabs[newActiveIndex]);\n    }\n    tabs.splice(index, 1);\n  };\n}])\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.tabs.directive:tabset\n * @restrict EA\n *\n * @description\n * Tabset is the outer container for the tabs directive\n *\n * @param {boolean=} vertical Whether or not to use vertical styling for the tabs.\n * @param {string=} direction  What direction the tabs should be rendered. Available:\n * 'right', 'left', 'below'.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <tabset>\n      <tab heading=\"Vertical Tab 1\"><b>First</b> Content!</tab>\n      <tab heading=\"Vertical Tab 2\"><i>Second</i> Content!</tab>\n    </tabset>\n    <hr />\n    <tabset vertical=\"true\">\n      <tab heading=\"Vertical Tab 1\"><b>First</b> Vertical Content!</tab>\n      <tab heading=\"Vertical Tab 2\"><i>Second</i> Vertical Content!</tab>\n    </tabset>\n  </file>\n</example>\n */\n.directive('tabset', function() {\n  return {\n    restrict: 'EA',\n    transclude: true,\n    replace: true,\n    require: '^tabset',\n    scope: {},\n    controller: 'TabsetController',\n    templateUrl: 'template/tabs/tabset.html',\n    compile: function(elm, attrs, transclude) {\n      return function(scope, element, attrs, tabsetCtrl) {\n        scope.vertical = angular.isDefined(attrs.vertical) ? scope.$parent.$eval(attrs.vertical) : false;\n        scope.type = angular.isDefined(attrs.type) ? scope.$parent.$eval(attrs.type) : 'tabs';\n        scope.direction = angular.isDefined(attrs.direction) ? scope.$parent.$eval(attrs.direction) : 'top';\n        scope.tabsAbove = (scope.direction != 'below');\n        tabsetCtrl.$scope = scope;\n        tabsetCtrl.$transcludeFn = transclude;\n      };\n    }\n  };\n})\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.tabs.directive:tab\n * @restrict EA\n *\n * @param {string=} heading The visible heading, or title, of the tab. Set HTML headings with {@link ui.bootstrap.tabs.directive:tabHeading tabHeading}.\n * @param {string=} select An expression to evaluate when the tab is selected.\n * @param {boolean=} active A binding, telling whether or not this tab is selected.\n * @param {boolean=} disabled A binding, telling whether or not this tab is disabled.\n *\n * @description\n * Creates a tab with a heading and content. Must be placed within a {@link ui.bootstrap.tabs.directive:tabset tabset}.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <div ng-controller=\"TabsDemoCtrl\">\n      <button class=\"btn btn-small\" ng-click=\"items[0].active = true\">\n        Select item 1, using active binding\n      </button>\n      <button class=\"btn btn-small\" ng-click=\"items[1].disabled = !items[1].disabled\">\n        Enable/disable item 2, using disabled binding\n      </button>\n      <br />\n      <tabset>\n        <tab heading=\"Tab 1\">First Tab</tab>\n        <tab select=\"alertMe()\">\n          <tab-heading><i class=\"icon-bell\"></i> Alert me!</tab-heading>\n          Second Tab, with alert callback and html heading!\n        </tab>\n        <tab ng-repeat=\"item in items\"\n          heading=\"{{item.title}}\"\n          disabled=\"item.disabled\"\n          active=\"item.active\">\n          {{item.content}}\n        </tab>\n      </tabset>\n    </div>\n  </file>\n  <file name=\"script.js\">\n    function TabsDemoCtrl($scope) {\n      $scope.items = [\n        { title:\"Dynamic Title 1\", content:\"Dynamic Item 0\" },\n        { title:\"Dynamic Title 2\", content:\"Dynamic Item 1\", disabled: true }\n      ];\n\n      $scope.alertMe = function() {\n        setTimeout(function() {\n          alert(\"You've selected the alert tab!\");\n        });\n      };\n    };\n  </file>\n</example>\n */\n\n/**\n * @ngdoc directive\n * @name ui.bootstrap.tabs.directive:tabHeading\n * @restrict EA\n *\n * @description\n * Creates an HTML heading for a {@link ui.bootstrap.tabs.directive:tab tab}. Must be placed as a child of a tab element.\n *\n * @example\n<example module=\"ui.bootstrap\">\n  <file name=\"index.html\">\n    <tabset>\n      <tab>\n        <tab-heading><b>HTML</b> in my titles?!</tab-heading>\n        And some content, too!\n      </tab>\n      <tab>\n        <tab-heading><i class=\"icon-heart\"></i> Icon heading?!?</tab-heading>\n        That's right.\n      </tab>\n    </tabset>\n  </file>\n</example>\n */\n.directive('tab', ['$parse', '$http', '$templateCache', '$compile',\nfunction($parse, $http, $templateCache, $compile) {\n  return {\n    require: '^tabset',\n    restrict: 'EA',\n    replace: true,\n    templateUrl: 'template/tabs/tab.html',\n    transclude: true,\n    scope: {\n      heading: '@',\n      onSelect: '&select', //This callback is called in contentHeadingTransclude\n                          //once it inserts the tab's content into the dom\n      onDeselect: '&deselect'\n    },\n    controller: function() {\n      //Empty controller so other directives can require being 'under' a tab\n    },\n    compile: function(elm, attrs, transclude) {\n      return function postLink(scope, elm, attrs, tabsetCtrl) {\n        var getActive, setActive;\n        if (attrs.active) {\n          getActive = $parse(attrs.active);\n          setActive = getActive.assign;\n          scope.$parent.$watch(getActive, function updateActive(value) {\n            scope.active = !!value;\n          });\n          scope.active = getActive(scope.$parent);\n        } else {\n          setActive = getActive = angular.noop;\n        }\n\n        scope.$watch('active', function(active) {\n          setActive(scope.$parent, active);\n          if (active) {\n            tabsetCtrl.select(scope);\n            scope.onSelect();\n          } else {\n            scope.onDeselect();\n          }\n        });\n\n        scope.disabled = false;\n        if ( attrs.disabled ) {\n          scope.$parent.$watch($parse(attrs.disabled), function(value) {\n            scope.disabled = !! value;\n          });\n        }\n\n        scope.select = function() {\n          if ( ! scope.disabled ) {\n            scope.active = true;\n          }\n        };\n\n        tabsetCtrl.addTab(scope);\n        scope.$on('$destroy', function() {\n          tabsetCtrl.removeTab(scope);\n        });\n        if (scope.active) {\n          setActive(scope.$parent, true);\n        }\n\n\n        //We need to transclude later, once the content container is ready.\n        //when this link happens, we're inside a tab heading.\n        scope.$transcludeFn = transclude;\n      };\n    }\n  };\n}])\n\n.directive('tabHeadingTransclude', [function() {\n  return {\n    restrict: 'A',\n    require: '^tab',\n    link: function(scope, elm, attrs, tabCtrl) {\n      scope.$watch('headingElement', function updateHeadingElement(heading) {\n        if (heading) {\n          elm.html('');\n          elm.append(heading);\n        }\n      });\n    }\n  };\n}])\n\n.directive('tabContentTransclude', ['$compile', '$parse', function($compile, $parse) {\n  return {\n    restrict: 'A',\n    require: '^tabset',\n    link: function(scope, elm, attrs) {\n      var tab = scope.$eval(attrs.tabContentTransclude);\n\n      //Now our tab is ready to be transcluded: both the tab heading area\n      //and the tab content area are loaded.  Transclude 'em both.\n      tab.$transcludeFn(tab.$parent, function(contents) {\n        angular.forEach(contents, function(node) {\n          if (isTabHeading(node)) {\n            //Let tabHeadingTransclude know.\n            tab.headingElement = node;\n          } else {\n            elm.append(node);\n          }\n        });\n      });\n    }\n  };\n  function isTabHeading(node) {\n    return node.tagName &&  (\n      node.hasAttribute('tab-heading') ||\n      node.hasAttribute('data-tab-heading') ||\n      node.tagName.toLowerCase() === 'tab-heading' ||\n      node.tagName.toLowerCase() === 'data-tab-heading'\n    );\n  }\n}])\n\n.directive('tabsetTitles', ['$http', function($http) {\n  return {\n    restrict: 'A',\n    require: '^tabset',\n    templateUrl: 'template/tabs/tabset-titles.html',\n    replace: true,\n    link: function(scope, elm, attrs, tabsetCtrl) {\n      if (!scope.$eval(attrs.tabsetTitles)) {\n        elm.remove();\n      } else {\n        //now that tabs location has been decided, transclude the tab titles in\n        tabsetCtrl.$transcludeFn(tabsetCtrl.$scope.$parent, function(node) {\n          elm.append(node);\n        });\n      }\n    }\n  };\n}])\n\n;\n\n\nangular.module('ui.bootstrap.timepicker', [])\n\n.constant('timepickerConfig', {\n  hourStep: 1,\n  minuteStep: 1,\n  showMeridian: true,\n  meridians: ['AM', 'PM'],\n  readonlyInput: false,\n  mousewheel: true\n})\n\n.directive('timepicker', ['$parse', '$log', 'timepickerConfig', function ($parse, $log, timepickerConfig) {\n  return {\n    restrict: 'EA',\n    require:'?^ngModel',\n    replace: true,\n    scope: {},\n    templateUrl: 'template/timepicker/timepicker.html',\n    link: function(scope, element, attrs, ngModel) {\n      if ( !ngModel ) {\n        return; // do nothing if no ng-model\n      }\n\n      var selected = new Date(), meridians = timepickerConfig.meridians;\n\n      var hourStep = timepickerConfig.hourStep;\n      if (attrs.hourStep) {\n        scope.$parent.$watch($parse(attrs.hourStep), function(value) {\n          hourStep = parseInt(value, 10);\n        });\n      }\n\n      var minuteStep = timepickerConfig.minuteStep;\n      if (attrs.minuteStep) {\n        scope.$parent.$watch($parse(attrs.minuteStep), function(value) {\n          minuteStep = parseInt(value, 10);\n        });\n      }\n\n      // 12H / 24H mode\n      scope.showMeridian = timepickerConfig.showMeridian;\n      if (attrs.showMeridian) {\n        scope.$parent.$watch($parse(attrs.showMeridian), function(value) {\n          scope.showMeridian = !!value;\n\n          if ( ngModel.$error.time ) {\n            // Evaluate from template\n            var hours = getHoursFromTemplate(), minutes = getMinutesFromTemplate();\n            if (angular.isDefined( hours ) && angular.isDefined( minutes )) {\n              selected.setHours( hours );\n              refresh();\n            }\n          } else {\n            updateTemplate();\n          }\n        });\n      }\n\n      // Get scope.hours in 24H mode if valid\n      function getHoursFromTemplate ( ) {\n        var hours = parseInt( scope.hours, 10 );\n        var valid = ( scope.showMeridian ) ? (hours > 0 && hours < 13) : (hours >= 0 && hours < 24);\n        if ( !valid ) {\n          return undefined;\n        }\n\n        if ( scope.showMeridian ) {\n          if ( hours === 12 ) {\n            hours = 0;\n          }\n          if ( scope.meridian === meridians[1] ) {\n            hours = hours + 12;\n          }\n        }\n        return hours;\n      }\n\n      function getMinutesFromTemplate() {\n        var minutes = parseInt(scope.minutes, 10);\n        return ( minutes >= 0 && minutes < 60 ) ? minutes : undefined;\n      }\n\n      function pad( value ) {\n        return ( angular.isDefined(value) && value.toString().length < 2 ) ? '0' + value : value;\n      }\n\n      // Input elements\n      var inputs = element.find('input'), hoursInputEl = inputs.eq(0), minutesInputEl = inputs.eq(1);\n\n      // Respond on mousewheel spin\n      var mousewheel = (angular.isDefined(attrs.mousewheel)) ? scope.$eval(attrs.mousewheel) : timepickerConfig.mousewheel;\n      if ( mousewheel ) {\n\n        var isScrollingUp = function(e) {\n          if (e.originalEvent) {\n            e = e.originalEvent;\n          }\n          //pick correct delta variable depending on event\n          var delta = (e.wheelDelta) ? e.wheelDelta : -e.deltaY;\n          return (e.detail || delta > 0);\n        };\n\n        hoursInputEl.bind('mousewheel wheel', function(e) {\n          scope.$apply( (isScrollingUp(e)) ? scope.incrementHours() : scope.decrementHours() );\n          e.preventDefault();\n        });\n\n        minutesInputEl.bind('mousewheel wheel', function(e) {\n          scope.$apply( (isScrollingUp(e)) ? scope.incrementMinutes() : scope.decrementMinutes() );\n          e.preventDefault();\n        });\n      }\n\n      scope.readonlyInput = (angular.isDefined(attrs.readonlyInput)) ? scope.$eval(attrs.readonlyInput) : timepickerConfig.readonlyInput;\n      if ( ! scope.readonlyInput ) {\n\n        var invalidate = function(invalidHours, invalidMinutes) {\n          ngModel.$setViewValue( null );\n          ngModel.$setValidity('time', false);\n          if (angular.isDefined(invalidHours)) {\n            scope.invalidHours = invalidHours;\n          }\n          if (angular.isDefined(invalidMinutes)) {\n            scope.invalidMinutes = invalidMinutes;\n          }\n        };\n\n        scope.updateHours = function() {\n          var hours = getHoursFromTemplate();\n\n          if ( angular.isDefined(hours) ) {\n            selected.setHours( hours );\n            refresh( 'h' );\n          } else {\n            invalidate(true);\n          }\n        };\n\n        hoursInputEl.bind('blur', function(e) {\n          if ( !scope.validHours && scope.hours < 10) {\n            scope.$apply( function() {\n              scope.hours = pad( scope.hours );\n            });\n          }\n        });\n\n        scope.updateMinutes = function() {\n          var minutes = getMinutesFromTemplate();\n\n          if ( angular.isDefined(minutes) ) {\n            selected.setMinutes( minutes );\n            refresh( 'm' );\n          } else {\n            invalidate(undefined, true);\n          }\n        };\n\n        minutesInputEl.bind('blur', function(e) {\n          if ( !scope.invalidMinutes && scope.minutes < 10 ) {\n            scope.$apply( function() {\n              scope.minutes = pad( scope.minutes );\n            });\n          }\n        });\n      } else {\n        scope.updateHours = angular.noop;\n        scope.updateMinutes = angular.noop;\n      }\n\n      ngModel.$render = function() {\n        var date = ngModel.$modelValue ? new Date( ngModel.$modelValue ) : null;\n\n        if ( isNaN(date) ) {\n          ngModel.$setValidity('time', false);\n          $log.error('Timepicker directive: \"ng-model\" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');\n        } else {\n          if ( date ) {\n            selected = date;\n          }\n          makeValid();\n          updateTemplate();\n        }\n      };\n\n      // Call internally when we know that model is valid.\n      function refresh( keyboardChange ) {\n        makeValid();\n        ngModel.$setViewValue( new Date(selected) );\n        updateTemplate( keyboardChange );\n      }\n\n      function makeValid() {\n        ngModel.$setValidity('time', true);\n        scope.invalidHours = false;\n        scope.invalidMinutes = false;\n      }\n\n      function updateTemplate( keyboardChange ) {\n        var hours = selected.getHours(), minutes = selected.getMinutes();\n\n        if ( scope.showMeridian ) {\n          hours = ( hours === 0 || hours === 12 ) ? 12 : hours % 12; // Convert 24 to 12 hour system\n        }\n        scope.hours =  keyboardChange === 'h' ? hours : pad(hours);\n        scope.minutes = keyboardChange === 'm' ? minutes : pad(minutes);\n        scope.meridian = selected.getHours() < 12 ? meridians[0] : meridians[1];\n      }\n\n      function addMinutes( minutes ) {\n        var dt = new Date( selected.getTime() + minutes * 60000 );\n        selected.setHours( dt.getHours(), dt.getMinutes() );\n        refresh();\n      }\n\n      scope.incrementHours = function() {\n        addMinutes( hourStep * 60 );\n      };\n      scope.decrementHours = function() {\n        addMinutes( - hourStep * 60 );\n      };\n      scope.incrementMinutes = function() {\n        addMinutes( minuteStep );\n      };\n      scope.decrementMinutes = function() {\n        addMinutes( - minuteStep );\n      };\n      scope.toggleMeridian = function() {\n        addMinutes( 12 * 60 * (( selected.getHours() < 12 ) ? 1 : -1) );\n      };\n    }\n  };\n}]);\n\nangular.module('ui.bootstrap.typeahead', ['ui.bootstrap.position', 'ui.bootstrap.bindHtml'])\n\n/**\n * A helper service that can parse typeahead's syntax (string provided by users)\n * Extracted to a separate service for ease of unit testing\n */\n  .factory('typeaheadParser', ['$parse', function ($parse) {\n\n  //                      00000111000000000000022200000000000000003333333333333330000000000044000\n  var TYPEAHEAD_REGEXP = /^\\s*(.*?)(?:\\s+as\\s+(.*?))?\\s+for\\s+(?:([\\$\\w][\\$\\w\\d]*))\\s+in\\s+(.*)$/;\n\n  return {\n    parse:function (input) {\n\n      var match = input.match(TYPEAHEAD_REGEXP), modelMapper, viewMapper, source;\n      if (!match) {\n        throw new Error(\n          \"Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_'\" +\n            \" but got '\" + input + \"'.\");\n      }\n\n      return {\n        itemName:match[3],\n        source:$parse(match[4]),\n        viewMapper:$parse(match[2] || match[1]),\n        modelMapper:$parse(match[1])\n      };\n    }\n  };\n}])\n\n  .directive('typeahead', ['$compile', '$parse', '$q', '$timeout', '$document', '$position', 'typeaheadParser',\n    function ($compile, $parse, $q, $timeout, $document, $position, typeaheadParser) {\n\n  var HOT_KEYS = [9, 13, 27, 38, 40];\n\n  return {\n    require:'ngModel',\n    link:function (originalScope, element, attrs, modelCtrl) {\n\n      //SUPPORTED ATTRIBUTES (OPTIONS)\n\n      //minimal no of characters that needs to be entered before typeahead kicks-in\n      var minSearch = originalScope.$eval(attrs.typeaheadMinLength) || 1;\n\n      //minimal wait time after last character typed before typehead kicks-in\n      var waitTime = originalScope.$eval(attrs.typeaheadWaitMs) || 0;\n\n      //should it restrict model values to the ones selected from the popup only?\n      var isEditable = originalScope.$eval(attrs.typeaheadEditable) !== false;\n\n      //binding to a variable that indicates if matches are being retrieved asynchronously\n      var isLoadingSetter = $parse(attrs.typeaheadLoading).assign || angular.noop;\n\n      //a callback executed when a match is selected\n      var onSelectCallback = $parse(attrs.typeaheadOnSelect);\n\n      var inputFormatter = attrs.typeaheadInputFormatter ? $parse(attrs.typeaheadInputFormatter) : undefined;\n\n      //INTERNAL VARIABLES\n\n      //model setter executed upon match selection\n      var $setModelValue = $parse(attrs.ngModel).assign;\n\n      //expressions used by typeahead\n      var parserResult = typeaheadParser.parse(attrs.typeahead);\n\n\n      //pop-up element used to display matches\n      var popUpEl = angular.element('<typeahead-popup></typeahead-popup>');\n      popUpEl.attr({\n        matches: 'matches',\n        active: 'activeIdx',\n        select: 'select(activeIdx)',\n        query: 'query',\n        position: 'position'\n      });\n      //custom item template\n      if (angular.isDefined(attrs.typeaheadTemplateUrl)) {\n        popUpEl.attr('template-url', attrs.typeaheadTemplateUrl);\n      }\n\n      //create a child scope for the typeahead directive so we are not polluting original scope\n      //with typeahead-specific data (matches, query etc.)\n      var scope = originalScope.$new();\n      originalScope.$on('$destroy', function(){\n        scope.$destroy();\n      });\n\n      var resetMatches = function() {\n        scope.matches = [];\n        scope.activeIdx = -1;\n      };\n\n      var getMatchesAsync = function(inputValue) {\n\n        var locals = {$viewValue: inputValue};\n        isLoadingSetter(originalScope, true);\n        $q.when(parserResult.source(scope, locals)).then(function(matches) {\n\n          //it might happen that several async queries were in progress if a user were typing fast\n          //but we are interested only in responses that correspond to the current view value\n          if (inputValue === modelCtrl.$viewValue) {\n            if (matches.length > 0) {\n\n              scope.activeIdx = 0;\n              scope.matches.length = 0;\n\n              //transform labels\n              for(var i=0; i<matches.length; i++) {\n                locals[parserResult.itemName] = matches[i];\n                scope.matches.push({\n                  label: parserResult.viewMapper(scope, locals),\n                  model: matches[i]\n                });\n              }\n\n              scope.query = inputValue;\n              //position pop-up with matches - we need to re-calculate its position each time we are opening a window\n              //with matches as a pop-up might be absolute-positioned and position of an input might have changed on a page\n              //due to other elements being rendered\n              scope.position = $position.position(element);\n              scope.position.top = scope.position.top + element.prop('offsetHeight');\n\n            } else {\n              resetMatches();\n            }\n            isLoadingSetter(originalScope, false);\n          }\n        }, function(){\n          resetMatches();\n          isLoadingSetter(originalScope, false);\n        });\n      };\n\n      resetMatches();\n\n      //we need to propagate user's query so we can higlight matches\n      scope.query = undefined;\n\n      //Declare the timeout promise var outside the function scope so that stacked calls can be cancelled later \n      var timeoutPromise;\n\n      //plug into $parsers pipeline to open a typeahead on view changes initiated from DOM\n      //$parsers kick-in on all the changes coming from the view as well as manually triggered by $setViewValue\n      modelCtrl.$parsers.unshift(function (inputValue) {\n\n        resetMatches();\n        if (inputValue && inputValue.length >= minSearch) {\n          if (waitTime > 0) {\n            if (timeoutPromise) {\n              $timeout.cancel(timeoutPromise);//cancel previous timeout\n            }\n            timeoutPromise = $timeout(function () {\n              getMatchesAsync(inputValue);\n            }, waitTime);\n          } else {\n            getMatchesAsync(inputValue);\n          }\n        }\n\n        if (isEditable) {\n          return inputValue;\n        } else {\n          modelCtrl.$setValidity('editable', false);\n          return undefined;\n        }\n      });\n\n      modelCtrl.$formatters.push(function (modelValue) {\n\n        var candidateViewValue, emptyViewValue;\n        var locals = {};\n\n        if (inputFormatter) {\n\n          locals['$model'] = modelValue;\n          return inputFormatter(originalScope, locals);\n\n        } else {\n\n          //it might happen that we don't have enough info to properly render input value\n          //we need to check for this situation and simply return model value if we can't apply custom formatting\n          locals[parserResult.itemName] = modelValue;\n          candidateViewValue = parserResult.viewMapper(originalScope, locals);\n          locals[parserResult.itemName] = undefined;\n          emptyViewValue = parserResult.viewMapper(originalScope, locals);\n\n          return candidateViewValue!== emptyViewValue ? candidateViewValue : modelValue;\n        }\n      });\n\n      scope.select = function (activeIdx) {\n        //called from within the $digest() cycle\n        var locals = {};\n        var model, item;\n\n        locals[parserResult.itemName] = item = scope.matches[activeIdx].model;\n        model = parserResult.modelMapper(originalScope, locals);\n        $setModelValue(originalScope, model);\n        modelCtrl.$setValidity('editable', true);\n\n        onSelectCallback(originalScope, {\n          $item: item,\n          $model: model,\n          $label: parserResult.viewMapper(originalScope, locals)\n        });\n\n        resetMatches();\n\n        //return focus to the input element if a mach was selected via a mouse click event\n        element[0].focus();\n      };\n\n      //bind keyboard events: arrows up(38) / down(40), enter(13) and tab(9), esc(27)\n      element.bind('keydown', function (evt) {\n\n        //typeahead is open and an \"interesting\" key was pressed\n        if (scope.matches.length === 0 || HOT_KEYS.indexOf(evt.which) === -1) {\n          return;\n        }\n\n        evt.preventDefault();\n\n        if (evt.which === 40) {\n          scope.activeIdx = (scope.activeIdx + 1) % scope.matches.length;\n          scope.$digest();\n\n        } else if (evt.which === 38) {\n          scope.activeIdx = (scope.activeIdx ? scope.activeIdx : scope.matches.length) - 1;\n          scope.$digest();\n\n        } else if (evt.which === 13 || evt.which === 9) {\n          scope.$apply(function () {\n            scope.select(scope.activeIdx);\n          });\n\n        } else if (evt.which === 27) {\n          evt.stopPropagation();\n\n          resetMatches();\n          scope.$digest();\n        }\n      });\n\n      // Keep reference to click handler to unbind it.\n      var dismissClickHandler = function (evt) {\n        if (element[0] !== evt.target) {\n          resetMatches();\n          scope.$digest();\n        }\n      };\n\n      $document.bind('click', dismissClickHandler);\n\n      originalScope.$on('$destroy', function(){\n        $document.unbind('click', dismissClickHandler);\n      });\n\n      element.after($compile(popUpEl)(scope));\n    }\n  };\n\n}])\n\n  .directive('typeaheadPopup', function () {\n    return {\n      restrict:'E',\n      scope:{\n        matches:'=',\n        query:'=',\n        active:'=',\n        position:'=',\n        select:'&'\n      },\n      replace:true,\n      templateUrl:'template/typeahead/typeahead-popup.html',\n      link:function (scope, element, attrs) {\n\n        scope.templateUrl = attrs.templateUrl;\n\n        scope.isOpen = function () {\n          return scope.matches.length > 0;\n        };\n\n        scope.isActive = function (matchIdx) {\n          return scope.active == matchIdx;\n        };\n\n        scope.selectActive = function (matchIdx) {\n          scope.active = matchIdx;\n        };\n\n        scope.selectMatch = function (activeIdx) {\n          scope.select({activeIdx:activeIdx});\n        };\n      }\n    };\n  })\n\n  .directive('typeaheadMatch', ['$http', '$templateCache', '$compile', '$parse', function ($http, $templateCache, $compile, $parse) {\n    return {\n      restrict:'E',\n      scope:{\n        index:'=',\n        match:'=',\n        query:'='\n      },\n      link:function (scope, element, attrs) {\n        var tplUrl = $parse(attrs.templateUrl)(scope.$parent) || 'template/typeahead/typeahead-match.html';\n        $http.get(tplUrl, {cache: $templateCache}).success(function(tplContent){\n           element.replaceWith($compile(tplContent.trim())(scope));\n        });\n      }\n    };\n  }])\n\n  .filter('typeaheadHighlight', function() {\n\n    function escapeRegexp(queryToEscape) {\n      return queryToEscape.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\n    }\n\n    return function(matchItem, query) {\n      return query ? matchItem.replace(new RegExp(escapeRegexp(query), 'gi'), '<strong>$&</strong>') : matchItem;\n    };\n  });\ndefine(\"ui-bootstrap\", function(){});\n\ndefine('main/home_ctrl',['angularAMD', 'ui-bootstrap'], function (angularAMD) {\n  \n  angularAMD.controller('interfaceController', ['$scope', '$state', function ($scope, $state) {\n  \t// 1:shape, 2:animation, 3:loading\n    $scope.panelTab = '1';\n    $scope.kit = kit;\n\n    // This injected function allows the canvas package to trigger a UI refresh\n    kit.digest = function() {\n      if(!$scope.$$phase) {\n    \t  $scope.$digest();\n      }\n    }\n    $scope.isPanelActive = function (panelName) {\n      if ($scope.panelTab === panelName) {\n        return 'active';\n      }\n    };\n\n\n    $scope.$watch('panelTab', function (newValue) {\n      if (newValue) {\n      \t$scope.panelTab = newValue;\n      }\n    });\n\n    // Prevent Keyboard Action\n    $scope.fieldFocus = function() {\n      kit.fieldFocus = true;\n    }\n    $scope.unfocus = function() {\n      kit.fieldFocus = false;\n    }\n\n    // Object, Shape, Image Selection, Removal\n    $scope.objectSelector = kit.selectedObject;\n\t\t$scope.$watch(function () {\n\t\t  return kit.selectedObject;\n\t\t}, function (value) {\n    \t$scope.objectSelector = kit.selectedObject;\n    });\n    $scope.objectSelectorClasses = function (obj) {\n    \tif(obj >= kit.objList.length) {\n    \t\treturn 'disabled';\n    \t}\n    }\n    $scope.selectObject = function(newValue) {\n      kit.selectObject(newValue);\n\t\t};\n    $scope.maxObjects = function () {\n      if($scope.kit.objList.length === constants.MAX_OBJECTS) {\n        return 'disabled';\n      }\n    };\n    $scope.petalCount = 6;\n    $scope.petalChange = function() {\n      kit.updatePetalCount(kit._u.parseIntOrDefault($scope.petalCount, constants.DEFAULT_RAYS));\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.objList[kit.selectedObject].petalCount;\n      } else {\n        return 6;\n      }\n    }, function (value) {\n      $scope.petalCount = value;\n    });\n\n    $scope.radialAccent = 1;\n    $scope.radialChange = function() {\n      kit.updateRadialAccent(kit._u.parseFloatOrDefault($scope.radialAccent, 1));\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.objList[kit.selectedObject].radialAccent;\n      } else {\n        return 6;\n      }\n    }, function (value) {\n      $scope.radialAccent = value;\n    });\n\n    $scope.addObject = function() {\n    \tkit.addObject();\n    }\n    $scope.removeObject = function() {\n    \tkit.removeObject();\n    }\n    \n    $scope.backgroundAlpha = kit.backgroundAlpha;\n    $scope.backgroundAlphaChange = function() {\n      kit.setAlpha($scope.backgroundAlpha);\n      kit.redraw();\n      $scope.unfocus();\n    }\n    $scope.$watch(function () {\n      return kit.backgroundAlpha;\n    }, function (value) {\n      $scope.backgroundAlpha = value;\n    });\n\n    // Composition mode drop-down\n    $scope.sources = constants.SOURCE_MODES;\n    $scope.sourceKeys = kit._u.getKeys(constants.SOURCE_MODES);\n    $scope.sourceMode = '';\n    $scope.updateCompositionMode = function() {\n      kit.sourceMode = $scope.sourceMode;\n      kit.redraw();\n    }\n    $scope.$watch(function () {\n      return kit.sourceMode;\n    }, function (value) {\n      $scope.sourceMode = kit.sourceMode;\n    });\n\n    $scope.getImage = function() {\n      kit.getImage();\n    }\n\n    // Edit Mode: Shape, Transform, None\n    $scope.editMode = kit.editMode;\n    $scope.$watch(function () {\n      return kit.editMode;\n    }, function (value) {\n      $scope.editMode = kit.editMode;\n    });\n    $scope.setEditMode = function(newValue) {\n      kit.editMode = newValue;\n      kit.redraw();\n    };\n\n    // Animation\n    $scope.play = function() {\n      kit.loopInit();\n      kit.sceneLoop();\n    }\n    $scope.stop = function() {\n      kit.stopScene();\n    }\n\n    $scope.segment = kit.segment;\n\t\t$scope.$watch(function () {\n\t\t  return kit.segment;\n\t\t}, function (value) {\n    \t$scope.segment = kit.getSegment();\n    });\n   \t$scope.selectFirst = function() {\n    \tkit.selectFirst();\n    }\n   \t$scope.selectPrev = function() {\n    \tkit.selectPrev();\n    }\n   \t$scope.selectNext = function() {\n    \tkit.selectNext();\n    }\n   \t$scope.selectLast = function() {\n    \tkit.selectLast();\n    }\n\n    $scope.removeKeyframe = function() {\n    \tkit.removeKeyframe();\n    }\n    $scope.removeLast = function() {\n    \tkit.removeLast();\n    }\n\n\n\n    $scope.length = 1;\n    $scope.lengthChange = function() {\n      if(kit.initialized) {\n        kit.keyFrames[kit.getSegment()].timing = kit._u.parseFloatOrDefault($scope.length, 1);\n      }\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.keyFrames[kit.getSegment()].timing;\n      } else {\n        return 1;\n      }\n    }, function (value) {\n      $scope.length = value;\n    });\n\n    $scope.rotation = 0;\n    $scope.rotationChange = function() {\n      if(kit.initialized) {\n        var newRotation = kit._u.reduceSig((kit._u.parseFloatOrDefault($scope.rotation, 0)*kit.constants.PI/180)%(2*kit.constants.PI), 5);\n        kit.objList[kit.selectedObject].rotation = newRotation;\n        kit.keyFrames[kit.getSegment()].obj[kit.selectedObject].rotation = newRotation;\n      }\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.objList[kit.selectedObject].rotation;\n      } else {\n        return 0;\n      }\n    }, function (value) {\n      $scope.rotation = kit._u.reduceSig((value/kit.constants.PI*180)%360, 2);\n    });\n\n    $scope.seamlessAnimation = kit.seamlessAnimation;\n    $scope.seamlessChange = function() {\n      kit.seamlessAnimation = $scope.seamlessAnimation;\n    }\n    $scope.highlightCurve = kit.highlightCurve;\n    $scope.highlightCurveChange = function() {\n      kit.highlightCurve = $scope.highlightCurve;\n      kit.redraw();\n    }\n\n\n    // Loading\n    // For the moment these are the only events that require JQuery\n    $scope.fieldData = '';\n    $scope.loadSample = function() {\n      var dataz = $.parseJSON(sampleJSON);\n      kit.loadData(dataz, false);\n    }\n    $scope.loadData = function() {\n      if($scope.fieldData==='') {\n        return;\n      }\n      var dataz = $.parseJSON($scope.fieldData);\n      kit.loadData(dataz, false);\n    }\n    $scope.getLoadData = function() {\n      var settings = kit.getSettings();\n      $scope.fieldData = JSON.stringify([settings, kit.resourceList, kit.objTypes, kit.keyFrames]);\n    }\n    $scope.clearScene = function() {\n      kit.clearScene();\n    }\n\n    // Resources\n    $scope.backgroundImageSource = '';\n    $scope.backgroundImageSourceChange = function() {\n      if(kit.initialized) {\n        kit.addBackgroundImage($scope.backgroundImageSource);\n      } \n      kit.fieldFocus = false;\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.resourceList.backgroundImageSource;\n      } else {\n        return '';\n      }\n    }, function (value) {\n      $scope.backgroundImageSource = value;\n    });\n\n    $scope.backgroundImagePage = '';\n    $scope.backgroundImagePageChange = function() {\n      if(kit.initialized) {\n        kit.resourceList.backgroundImagePage = $scope.backgroundImagePage;\n      }\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.resourceList.backgroundImagePage;\n      } else {\n        return '';\n      }\n    }, function (value) {\n      $scope.backgroundImagePage = value;\n    });\n\n    $scope.fillImageSource = '';\n    $scope.fillImageSourceChange = function() {\n      if(kit.initialized) {\n        kit.addFillImage($scope.fillImageSource);\n      }\n      kit.fieldFocus = false;\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.resourceList.fillImageSource;\n      } else {\n        return '';\n      }\n    }, function (value) {\n      $scope.fillImageSource = value;\n    });\n\n    $scope.fillImagePage = '';\n    $scope.fillImagePageChange = function() {\n      if(kit.initialized) {\n        kit.resourceList.fillImagePage = $scope.fillImagePage;\n      }\n    }\n    $scope.$watch(function () {\n      if(kit.initialized) {\n        return kit.resourceList.fillImagePage;\n      } else {\n        return '';\n      }\n    }, function (value) {\n      $scope.fillImagePage = value;\n    });\n\n    // TODO\n    /*\n    $('#makeGIF').click(function() {\n      $('#playSegment, #playAll, #makeGIF').attr('disabled', true);\n      kit.gifInit();\n      kit.sceneLoop();\n    });\n    */\n  }]);\n});\n\n"]}