{"version":3,"file":"animWorker.js","sources":["../../../../build/scripts/lib/jsgif/animWorker.js"],"names":["importScripts","self","onmessage","event","frame_index","frame_length","height","width","delay","imageData","data","encoder","GIFEncoder","setRepeat","setQuality","setSize","setDelay","start","cont","setProperties","addFrame","finish","postMessage","frame_data","stream","getData"],"mappings":"AAAAA,cAAc,gBAAiB,cAAe,iBAE9CC,KAAKC,UAAY,SAASC,GAKxB,GAAIC,GACFC,EACAC,EACAC,EACAC,EACAC,CAEFL,GAAcD,EAAMO,KAAkB,YACtCL,EAAeF,EAAMO,KAAmB,aACxCJ,EAASH,EAAMO,KAAa,OAC5BH,EAAQJ,EAAMO,KAAY,MAC1BD,EAAYN,EAAMO,KAAgB,UAClCF,EAAQL,EAAMO,KAAY,KAE1B,IAAIC,GAAU,GAAIC,WAClBD,GAAQE,UAAU,GAElBF,EAAQG,WAAW,GACnBH,EAAQI,QAAQR,EAAOD,GACvBK,EAAQK,SAASR,GAEC,GAAfJ,EAGDO,EAAQM,SAKRN,EAAQO,OACRP,EAAQQ,eAAc,GAAM,IAG9BR,EAAQS,SAASX,GAAW,GACzBJ,GAAgBD,GAEjBO,EAAQU,SAEVpB,KAAKqB,aAAalB,YAAcA,EAAamB,WAAaZ,EAAQa,SAASC","sourcesContent":["importScripts('LZWEncoder.js', 'NeuQuant.js', 'GIFEncoder.js');      /* imports three scripts */\n\nself.onmessage = function(event) {\n  //console.log(\"message!\");\n  //alert(\"message\");\n  //self.postMessage(event.data);\n  //return;\n  var frame_index,\n    frame_length,\n    height, \n    width,\n    delay,\n    imageData; //get it from onmessage\n    \n  frame_index = event.data[\"frame_index\"];\n  frame_length = event.data[\"frame_length\"];\n  height = event.data[\"height\"];\n  width = event.data[\"width\"];\n  imageData = event.data[\"imageData\"];\n  delay = event.data[\"delay\"];\n  \n  var encoder = new GIFEncoder(); //create a new GIFEncoder for every new job\n  encoder.setRepeat(0); \t//0  -> loop forever\n  //1+ -> loop n times then stop\n  encoder.setQuality(1);\n  encoder.setSize(width, height); \n  encoder.setDelay(delay);\t//go to next frame every n milliseconds\n  \n  if(frame_index == 0)\n  {\n    \n    encoder.start();\n  }\n  else\n  {\n    //alert();\n    encoder.cont();\n    encoder.setProperties(true, false); //started, firstFrame\n  }\n\n  encoder.addFrame(imageData, true);\n  if(frame_length == frame_index)\n  {\n    encoder.finish();\n  }\n  self.postMessage({\"frame_index\":frame_index, \"frame_data\":encoder.stream().getData()}) //on the page, search for the GIF89a to see the frame_index\n};"]}