{"version":3,"file":"tween.js","sources":["../../../../../../build/scripts/lib/jsgif/Demos/canvascycle/tween.js"],"names":["Tween","_args","algorithm","algo","properties","props","_key","this","mode","require","alert","_prop","end","start","target","toString","match","suffix","RegExp","$1","$3","replace","parseFloat","parseInt","filter","tweenFrame","_start","_end","_amount","_mode","_algo","ease","EaseModes","TweenManager","_tweens","_nextId","add","_tween","id","logic","clock","_id","destroyed","removeAll","arguments","length","criteria","num_crit","key","tween","matched","prototype","delay","_idx","_len","amount","duration","_value","onTweenUpdate","onTweenComplete","EaseAlgos","Linear","Quadratic","Math","pow","Cubic","Quartetic","Quintic","Sine","sin","PI","Circular","acos","EaseIn","EaseOut","EaseInOut"],"mappings":"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","sourcesContent":["////\n// Tween.js\n// Provides numerical obj property animation with easing.\n// Copyright (c) 2005 - 2008 Joseph Huckaby\n////\n\nvar TweenManager = {\n\t\n\t_tweens: {},\n\t_nextId: 1,\n\n\tadd: function(_args) {\n\t\t// add new tween to table\n\t\tvar _tween = new Tween(_args);\n\t\tthis._tweens[ this._nextId ] = _tween;\n\t\t_tween.id = this._nextId;\n\t\tthis._nextId++;\n\t\treturn _tween;\n\t},\n\n\tlogic: function(clock) {\n\t\t// update tweens\n\t\tfor (var _id in this._tweens) {\n\t\t\tvar _tween = this._tweens[_id];\n\t\t\t_tween.logic(clock);\n\t\t\tif (_tween.destroyed) delete this._tweens[_id];\n\t\t}\n\t},\n\n\tremoveAll: function() {\n\t\t// remove all tweens\n\t\tif (arguments.length) {\n\t\t\tvar criteria = arguments[0];\n\t\t\tvar num_crit = 0;\n\t\t\tfor (var key in criteria) num_crit++;\n\t\t\t\n\t\t\tfor (var id in this._tweens) {\n\t\t\t\tvar tween = this._tweens[id];\n\t\t\t\tvar matched = 0;\n\t\t\t\tfor (var key in criteria) {\n\t\t\t\t\tif (tween[key] == criteria[key]) matched++;\n\t\t\t\t}\n\t\t\t\tif (matched == num_crit) {\n\t\t\t\t\ttween.destroyed = 1;\n\t\t\t\t\tdelete this._tweens[id];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (var id in this._tweens) {\n\t\t\t\tvar tween = this._tweens[id];\n\t\t\t\ttween.destroyed = 1;\n\t\t\t}\n\t\t\tthis._tweens = {};\n\t\t}\n\t}\n\t\n};\nTweenManager.tween = TweenManager.add;\n\n// Tween Object\n\nfunction Tween(_args) {\n\t// create new tween\n\t// args should contain:\n\t//\ttarget: target object\n\t//\tduration: length of animation in logic frames\n\t//\tmode: EaseIn, EaseOut, EaseInOut (omit or empty string for linear)\n\t//\talgorithm: Quadtaric, etc.\n\t//\tproperties: { x: {start:0, end:150}, y: {start:0, end:250, filter:Math.floor} }\n\tif (!_args.algorithm && _args.algo) { _args.algorithm = _args.algo; delete _args.algo; }\n\tif (!_args.properties && _args.props) { _args.properties = _args.props; delete _args.props; }\n\t\n\tfor (var _key in _args) this[_key] = _args[_key];\n\t\n\t// linear shortcut\n\tif (!this.mode) this.mode = 'EaseIn';\n\tif (!this.algorithm) this.algorithm = 'Linear';\n\t\n\tthis.require('target', 'duration', 'properties');\n\t// if (typeof(this.target) != 'object') return alert(\"Tween: Target is not an object\");\n\tif (typeof(this.duration) != 'number') return alert(\"Tween: Duration is not a number\");\n\tif (typeof(this.properties) != 'object') return alert(\"Tween: Properties is not an object\");\n\t\t\n\t// setup properties\n\tfor (var _key in this.properties) {\n\t\tvar _prop = this.properties[_key];\n\t\tif (typeof(_prop) == 'number') _prop = this.properties[_key] = { end: _prop };\n\t\tif (typeof(_prop) != 'object') return alert(\"Tween: Property \" + _key + \" is not the correct format\");\n\t\tif (typeof(_prop.start) == 'undefined') _prop.start = this.target[_key];\n\t\t\n\t\tif (_prop.start.toString().match(/^([\\d\\.]+)([a-zA-Z]+)$/) && !_prop.suffix) {\n\t\t\t_prop.start = RegExp.$1;\n\t\t\t_prop.suffix = RegExp.$3;\n\t\t\t_prop.end = _prop.end.toString().replace(/[^\\d\\.]+$/, '');\n\t\t}\n\t\tif ((typeof(_prop.start) != 'number') && _prop.start.toString().match(/^\\d+\\.\\d+$/)) {\n\t\t\t_prop.start = parseFloat( _prop.start );\n\t\t}\n\t\telse if ((typeof(_prop.start) != 'number') && _prop.start.toString().match(/^\\d+$/)) {\n\t\t\t_prop.start = parseInt( _prop.start, 10 );\n\t\t}\n\t\t\n\t\tif ((typeof(_prop.end) != 'number') && _prop.end.toString().match(/^\\d+\\.\\d+$/)) {\n\t\t\t_prop.end = parseFloat( _prop.end );\n\t\t}\n\t\telse if ((typeof(_prop.end) != 'number') && _prop.end.toString().match(/^\\d+$/)) {\n\t\t\t_prop.end = parseInt( _prop.end, 10 );\n\t\t}\n\t\t\n\t\tif (typeof(_prop.start) != 'number') return alert(\"Tween: Property \" + _key + \": start is not a number\");\n\t\tif (typeof(_prop.end) != 'number') return alert(\"Tween: Property \" + _key + \": end is not a number\");\n\t\tif (_prop.filter && (typeof(_prop.filter) != 'function')) return alert(\"Tween: Property \" + _key + \": filter is not a function\");\n\t}\n}\n\nTween.prototype.destroyed = false;\nTween.prototype.delay = 0;\n\nTween.prototype.require = function() {\n\t// make sure required class members exist\n\tfor (var _idx = 0, _len = arguments.length; _idx < _len; _idx++) {\n\t\tif (typeof(this[arguments[_idx]]) == 'undefined') {\n\t\t\treturn alert(\"Tween: Missing required parameter: \" + arguments[_idx]);\n\t\t}\n\t}\n\treturn true;\n};\n\nTween.prototype.logic = function(clock) {\n\t// abort if our target is destroyed\n\t// (and don't call onTweenComplete)\n\tif (this.target.destroyed) {\n\t\tthis.destroyed = true;\n\t\treturn;\n\t}\n\tif (this.delay > 0) {\n\t\tthis.delay--;\n\t\tif (this.delay <= 0) this.start = clock;\n\t\telse return;\n\t}\n\tif (!this.start) this.start = clock;\n\t\n\t// calculate current progress\n\tthis.amount = (clock - this.start) / this.duration;\n\tif (this.amount >= 1.0) {\n\t\tthis.amount = 1.0;\n\t\tthis.destroyed = true;\n\t}\n\t\n\t// animate obj properties\n\tfor (var _key in this.properties) {\n\t\tvar _prop = this.properties[_key];\n\t\tvar _value = _prop.start + (ease(this.amount, this.mode, this.algorithm) * (_prop.end - _prop.start));\n\t\tif (_prop.filter) _value = _prop.filter( _value );\n\t\t\n\t\t/* console.log( \"tweening: \" + _key + \": \" + serialize({\n\t\t\tid: this.id,\n\t\t\tamount: this.amount,\n\t\t\tstart: _prop.start,\n\t\t\tend: _prop.end,\n\t\t\tmode: this.mode,\n\t\t\talgorithm: this.algorithm,\n\t\t\tvalue: _value\n\t\t}) ); */\n\t\t\n\t\tthis.target[_key] = _prop.suffix ? ('' + _value + _prop.suffix) : _value;\n\t}\n\t\n\t// notify object that things are happening to it\n\tif (this.onTweenUpdate) this.onTweenUpdate(this);\n\tif (this.target.onTweenUpdate) this.target.onTweenUpdate(this);\n\t\n\tif (this.destroyed) {\n\t\tif (this.onTweenComplete) this.onTweenComplete(this);\n\t\tif (this.target.onTweenComplete) this.target.onTweenComplete(this);\n\t}\n};\n\n// Static Utility Function for tweening a single property to a single point in an animation\n\nfunction tweenFrame(_start, _end, _amount, _mode, _algo) {\n\treturn _start + (ease(_amount, _mode, _algo) * (_end - _start));\n}\n\n//\n// Easing functions\n//\n\nvar EaseAlgos = {\n\tLinear: function(_amount) { return _amount; },\n\tQuadratic: function(_amount) { return Math.pow(_amount, 2); },\n\tCubic: function(_amount) { return Math.pow(_amount, 3); },\n\tQuartetic: function(_amount) { return Math.pow(_amount, 4); },\n\tQuintic: function(_amount) { return Math.pow(_amount, 5); },\n\tSine: function(_amount) { return 1 - Math.sin((1 - _amount) * Math.PI / 2); },\n\tCircular: function(_amount) { return 1 - Math.sin(Math.acos(_amount)); }\n};\nvar EaseModes = {\n\tEaseIn: function(_amount, _algo) { return EaseAlgos[_algo](_amount); },\n\tEaseOut: function(_amount, _algo) { return 1 - EaseAlgos[_algo](1 - _amount); },\n\tEaseInOut: function(_amount, _algo) {\n\t\treturn (_amount <= 0.5) ? EaseAlgos[_algo](2 * _amount) / 2 : (2 - EaseAlgos[_algo](2 * (1 - _amount))) / 2;\n\t}\n};\nfunction ease(_amount, _mode, _algo) {\n\treturn EaseModes[_mode]( _amount, _algo );\n}\n"]}