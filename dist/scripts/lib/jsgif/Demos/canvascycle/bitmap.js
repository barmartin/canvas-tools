Class.create("Bitmap",{width:0,height:0,pixels:null,palette:null,drawCount:0,optPixels:null,__construct:function(a){this.width=a.width,this.height=a.height,this.palette=new Palette(a.colors,a.cycles),this.pixels=a.pixels},optimize:function(){for(var a=[],b=0;256>b;b++)a[b]=0;for(var c=this.palette.cycles,b=0,d=c.length;d>b;b++){var e=c[b];if(e.rate)for(idy=e.low;idy<=e.high;idy++)a[idy]=1}var f,g,h=this.optPixels=[],i=this.pixels,j=0,k=0,l=this.width,m=this.height;for(g=0;m>g;g++)for(f=0;l>f;f++)a[i[j]]&&(h[k++]=j),j++},render:function(a,b){var c=this.palette.getRawTransformedColors(),d=a.data,e=this.pixels;if(b&&this.drawCount&&this.optPixels)for(var f,g,h,i=this.optPixels,j=0,k=i.length;k>j;j++)g=i[j],h=c[e[g]],f=4*g,d[f+0]=h[0],d[f+1]=h[1],d[f+2]=h[2],d[f+3]=255;else{var l,m,h,f=0,g=0,n=this.width,o=this.height;for(m=0;o>m;m++)for(l=0;n>l;l++)h=c[e[g]],d[f+0]=h[0],d[f+1]=h[1],d[f+2]=h[2],d[f+3]=255,f+=4,g++}this.drawCount++}});
//# sourceMappingURL=bitmap.map