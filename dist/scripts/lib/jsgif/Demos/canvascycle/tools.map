{"version":3,"file":"tools.js","sources":["../../../../../../build/scripts/lib/jsgif/Demos/canvascycle/tools.js"],"names":["$","thingy","obj","document","getElementById","setOpacity","hide","this","style","display","show","addClass","name","removeClass","className","classes","split","idx","find_idx_in_array","splice","join","setClass","enabled","GetTickCount","Math","floor","Date","getTime","CanvasCycle","globalTimeStart","getInnerWindowSize","dom","window","myWidth","myHeight","innerWidth","innerHeight","documentElement","clientWidth","clientHeight","body","width","height","arr","elem","len","length","isa_hash","arg","isa_array","merge_objects","a","b","c","eval","key","serialize","glue","stream","replace","num","buffer","match","u","navigator","userAgent","webkit","chrome","safari","ie","ie6","ie7","ie8","moz","op","opera","mac","ff","iphone","ipad","snow","titanium","android","ver","parseFloat","RegExp","$1","ua","mobile"],"mappings":"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","sourcesContent":["// Misc Tools\n// Copyright (c) 2010 Joseph Huckaby.\n// Released under the LGPL v3.0: http://www.opensource.org/licenses/lgpl-3.0.html\n// getInnerWindowSize() was grabbed from: http://www.howtocreate.co.uk/tutorials/javascript/browserwindow\n\nfunction $(thingy) {\n\t// universal DOM lookup function, extends object with hide/show/addClass/removeClass\n\t// can pass in ID or actual DOM object reference\n\tvar obj = (typeof(thingy) == 'string') ? document.getElementById(thingy) : thingy;\n\tif (obj && !obj.setOpacity) {\n\t\tobj.hide = function() { this.style.display = 'none'; return this; };\n\t\tobj.show = function() { this.style.display = ''; return this; };\n\t\tobj.addClass = function(name) { this.removeClass(name); this.className += ' ' + name; return this; };\n\n\t\tobj.removeClass = function(name) {\n\t\t\tvar classes = this.className.split(/\\s+/);\n\t\t\tvar idx = find_idx_in_array( classes, name );\n\t\t\tif (idx > -1) {\n\t\t\t\tclasses.splice( idx, 1 );\n\t\t\t\tthis.className = classes.join(' ');\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\t\t\n\t\tobj.setClass = function(name, enabled) {\n\t\t\tif (enabled) this.addClass(name);\n\t\t\telse this.removeClass(name);\n\t\t};\n\t}\n\treturn obj;\n}\n\nfunction GetTickCount() {\n\t// milliseconds since page load\n\treturn Math.floor( (new Date()).getTime() - CanvasCycle.globalTimeStart );\n}\n\nfunction getInnerWindowSize(dom) {\n\t// get size of inner window\n\t// From: http://www.howtocreate.co.uk/tutorials/javascript/browserwindow\n\tif (!dom) dom = window;\n\tvar myWidth = 0, myHeight = 0;\n\n\tif( typeof( dom.innerWidth ) == 'number' ) {\n\t\t// Non-IE\n\t\tmyWidth = dom.innerWidth;\n\t\tmyHeight = dom.innerHeight;\n\t}\n\telse if( dom.document.documentElement && ( dom.document.documentElement.clientWidth || dom.document.documentElement.clientHeight ) ) {\n\t\t// IE 6+ in 'standards compliant mode'\n\t\tmyWidth = dom.document.documentElement.clientWidth;\n\t\tmyHeight = dom.document.documentElement.clientHeight;\n\t}\n\telse if( dom.document.body && ( dom.document.body.clientWidth || dom.document.body.clientHeight ) ) {\n\t\t// IE 4 compatible\n\t\tmyWidth = dom.document.body.clientWidth;\n\t\tmyHeight = dom.document.body.clientHeight;\n\t}\n\treturn { width: myWidth, height: myHeight };\n}\n\nfunction find_idx_in_array(arr, elem) {\n\t// return idx of elem in arr, or -1 if not found\n\tfor (var idx = 0, len = arr.length; idx < len; idx++) {\n\t\tif (arr[idx] == elem) return idx;\n\t}\n\treturn -1;\n}\n\nfunction isa_hash(arg) {\n\t// determine if arg is a hash\n\treturn( !!arg && (typeof(arg) == 'object') && (typeof(arg.length) == 'undefined') );\n}\n\nfunction isa_array(arg) {\n\t// determine if arg is an array or is array-like\n\tif (typeof(arg) == 'array') return true;\n\treturn( !!arg && (typeof(arg) == 'object') && (typeof(arg.length) != 'undefined') );\n}\n\nfunction merge_objects(a, b) {\n\t// merge keys from a and b into c and return c\n\t// b has precedence over a\n\tif (!a) a = {};\n\tif (!b) b = {};\n\tvar c = {};\n\n\t// also handle serialized objects for a and b\n\tif (typeof(a) != 'object') eval( \"a = \" + a );\n\tif (typeof(b) != 'object') eval( \"b = \" + b );\n\n\tfor (var key in a) c[key] = a[key];\n\tfor (var key in b) c[key] = b[key];\n\n\treturn c;\n}\n\nfunction serialize(thingy, glue) {\n\t// serialize anything into json\n\t// or perl object notation (just set glue to '=>')\n\tif (!glue) glue = ':'; // default to json\n\tvar stream = '';\n\t\n\tif (typeof(thingy) == 'boolean') {\n\t\tstream += (thingy ? 'true' : 'false');\n\t}\n\telse if (typeof(thingy) == 'number') {\n\t\tstream += thingy;\n\t}\n\telse if (typeof(thingy) == 'string') {\n\t\tstream += '\"' + thingy.replace(/([\\\"\\\\])/g, '\\\\$1').replace(/\\r/g, \"\\\\r\").replace(/\\n/g, \"\\\\n\") + '\"';\n\t}\n\telse if (isa_hash(thingy)) {\n\t\tvar num = 0;\n\t\tvar buffer = [];\n\t\tfor (var key in thingy) {\n\t\t\tbuffer[num] = (key.match(/^[A-Za-z]\\w*$/) ? key : ('\"'+key+'\"')) + glue + serialize(thingy[key], glue);\n\t\t\tnum++;\n\t\t}\n\t\tstream += '{' + buffer.join(',') + '}';\n\t}\n\telse if (isa_array(thingy)) {\n\t\tvar buffer = [];\n\t\tfor (var idx = 0, len = thingy.length; idx < len; idx++) {\n\t\t\tbuffer[idx] = serialize(thingy[idx], glue);\n\t\t}\n\t\tstream += '[' + buffer.join(',') + ']';\n\t}\n\telse {\n\t\t// unknown type, just return 0\n\t\tstream += '0';\n\t}\n\t\n\treturn stream;\n}\n\n(function() {\n\t// Browser detection\n\tvar u = navigator.userAgent;\n\tvar webkit = !!u.match(/webkit/i);\n\tvar chrome = !!u.match(/Chrome/);\n\tvar safari = !!u.match(/Safari/) && !chrome;\n\tvar ie = !!u.match(/MSIE/);\n\tvar ie6 = ie && !!u.match(/MSIE\\s+6/);\n\tvar ie7 = ie && !!u.match(/MSIE\\s+7/);\n\tvar ie8 = ie && !!u.match(/MSIE\\s+8/);\n\tvar moz = !safari && !ie;\n\tvar op = !!window.opera;\n\tvar mac = !!u.match(/Mac/i);\n\tvar ff = !!u.match(/Firefox/);\n\tvar iphone = !!u.match(/iPhone/);\n\tvar ipad = !!u.match(/iPad/);\n\tvar snow = !!u.match(/Mac\\s+OS\\s+X\\s+10\\D[6789]/);\n\tvar titanium = safari && !!u.match(/Titanium/);\n\tvar android = !!u.match(/android/i);\n\t\n\tvar ver = 0;\n\tif (ff && u.match(/Firefox\\D+(\\d+(\\.\\d+)?)/)) {\n\t\tver = parseFloat( RegExp.$1 );\n\t}\n\telse if (safari && u.match(/Version\\D(\\d+(\\.\\d+)?)/)) {\n\t\tver = parseFloat( RegExp.$1 );\n\t}\n\telse if (chrome && u.match(/Chrome\\D(\\d+(\\.\\d+)?)/)) {\n\t\tver = parseFloat( RegExp.$1 );\n\t}\n\telse if (ie && u.match(/MSIE\\D+(\\d+(\\.\\d+)?)/)) {\n\t\tver = parseFloat( RegExp.$1 );\n\t}\n\telse if (op && u.match(/Opera\\D+(\\d+(\\.\\d+)?)/)) {\n\t\tver = parseFloat( RegExp.$1 );\n\t}\n\t\n\twindow.ua = {\n\t\twebkit: webkit,\n\t\tsafari: safari,\n\t\tie: ie,\n\t\tie8: ie8,\n\t\tie7: ie7,\n\t\tie6: ie6,\n\t\tmoz: moz,\n\t\top: op,\n\t\tmac: mac,\n\t\tff: ff,\n\t\tchrome: chrome,\n\t\tiphone: iphone,\n\t\tipad: ipad,\n\t\tsnow: snow,\n\t\ttitanium: titanium,\n\t\tandroid: android,\n\t\tmobile: iphone || ipad || android,\n\t\tver: ver\n\t};\n})();\n\n"]}