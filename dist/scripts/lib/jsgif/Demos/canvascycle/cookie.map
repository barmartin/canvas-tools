{"version":3,"file":"cookie.js","sources":["../../../../../../build/scripts/lib/jsgif/Demos/canvascycle/cookie.js"],"names":["CookieTree","args","key","this","expires","now","Date","setFullYear","getFullYear","toGMTString","parse","prototype","domain","location","hostname","path","pathname","tree","cookies","document","cookie","split","idx","len","length","cookie_raw","match","unescape","RegExp","$1","eval","e","merge_objects","get","set","value","save","escape","serialize","replace","remove"],"mappings":"AAiBA,QAASA,YAAWC,GAEnB,GAAIA,EACH,IAAK,GAAIC,KAAOD,GAAME,KAAKD,GAAOD,EAAKC,EAGxC,KAAKC,KAAKC,QAAS,CAClB,GAAIC,GAAM,GAAIC,KACdD,GAAIE,YAAaF,EAAIG,cAAgB,IACrCL,KAAKC,QAAUC,EAAII,cAGpBN,KAAKO,QAGNV,WAAWW,UAAUC,OAASC,SAASC,SACvCd,WAAWW,UAAUI,KAAOF,SAASG,SAErChB,WAAWW,UAAUD,MAAQ,WAE5BP,KAAKc,OAEL,KAAK,GADDC,SAAUC,SAASC,OAAOC,MAAM,SAC3BC,IAAM,EAAGC,IAAML,QAAQM,OAAcD,IAAND,IAAWA,MAAO,CACzD,GAAIG,YAAaP,QAAQI,IACzB,IAAIG,WAAWC,MAAM,qBAAsB,CAC1C,GAAIN,QAAS,KACTK,WAAaE,SAAUC,OAAOC,GAElC,KACCC,KAAM,YAAcL,WAAa,KAElC,MAAOM,GAENX,UAGDjB,KAAKc,KAAOe,cAAe7B,KAAKc,KAAMG,QACtCE,IAAMC,OAKTvB,WAAWW,UAAUsB,IAAM,SAAS/B,GAEnC,MAAOC,MAAKc,KAAKf,IAGlBF,WAAWW,UAAUuB,IAAM,SAAShC,EAAKiC,GAExChC,KAAKc,KAAKf,GAAOiC,GAGlBnC,WAAWW,UAAUyB,KAAO,WAE3B,GAAIX,GAAa,cAAgBY,OAAOC,UAAUnC,KAAKc,MAElDd,MAAKY,KAAKW,MAAM,SACpBvB,KAAKY,KAAOZ,KAAKY,KAAKwB,QAAQ,YAAa,IAAM,KAGlDd,GAAc,aAAetB,KAAKC,QAClCqB,GAAc,YAActB,KAAKS,OACjCa,GAAc,UAAYtB,KAAKY,KAI/BI,SAASC,OAASK,GAGnBzB,WAAWW,UAAU6B,OAAS,WAE7B,GAAIf,GAAa,eAEZtB,MAAKY,KAAKW,MAAM,SACpBvB,KAAKY,KAAOZ,KAAKY,KAAKwB,QAAQ,YAAa,IAAM,IAGlD,IAAIlC,GAAM,GAAIC,KACdD,GAAIE,YAAaF,EAAIG,cAAgB,GACrCiB,GAAc,aAAepB,EAAII,cAEjCgB,GAAc,YAActB,KAAKS,OACjCa,GAAc,UAAYtB,KAAKY,KAE/BI,SAASC,OAASK","sourcesContent":["/***\n * cookie.js\n * A simple cookie library supporting hash trees\n * Requires Joe Tools for merge_objects() and serialize().\n * \n * var tree = new CookieTree();\n * tree.set( \"foo\", \"bar\" );\n * tree.set( \"complex\", { hello: \"there\", array: [1,2,3] } );\n * tree.save();\n * \n * Copyright (c) 2007 Joseph Huckaby.\n * Released under the LGPL v3.0: http://www.opensource.org/licenses/lgpl-3.0.html\n */\n\n/* if (!window.merge_objects || !window.serialize)\n\talert(\"ERROR: cookie.js requires tools.js.\"); */\n\nfunction CookieTree(args) {\n\t// class constructor\n\tif (args) {\n\t\tfor (var key in args) this[key] = args[key];\n\t}\n\t\n\tif (!this.expires) {\n\t\tvar now = new Date();\n\t\tnow.setFullYear( now.getFullYear() + 10 ); // 10 years from now\n\t\tthis.expires = now.toGMTString();\n\t}\n\t\n\tthis.parse();\n};\n\nCookieTree.prototype.domain = location.hostname;\nCookieTree.prototype.path = location.pathname;\n\nCookieTree.prototype.parse = function() {\n\t// parse document.cookie into hash tree\n\tthis.tree = {};\n\tvar cookies = document.cookie.split(/\\;\\s*/);\n\tfor (var idx = 0, len = cookies.length; idx < len; idx++) {\n\t\tvar cookie_raw = cookies[idx];\n\t\tif (cookie_raw.match(/^CookieTree=(.+)$/)) {\n\t\t\tvar cookie = null;\n\t\t\tvar cookie_raw = unescape( RegExp.$1 );\n\t\t\t// Debug.trace(\"Cookie\", \"Parsing cookie: \" + cookie_raw);\n\t\t\ttry {\n\t\t\t\teval( \"cookie = \" + cookie_raw + \";\" );\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\t// Debug.trace(\"Cookie\", \"Failed to parse cookie.\");\n\t\t\t\tcookie = {}; \n\t\t\t}\n\t\t\t\n\t\t\tthis.tree = merge_objects( this.tree, cookie );\n\t\t\tidx = len;\n\t\t}\n\t}\n};\n\nCookieTree.prototype.get = function(key) {\n\t// get tree branch given value (top level)\n\treturn this.tree[key];\n};\n\nCookieTree.prototype.set = function(key, value) {\n\t// set tree branch to given value (top level)\n\tthis.tree[key] = value;\n};\n\nCookieTree.prototype.save = function() {\n\t// serialize tree and save back into document.cookie\n\tvar cookie_raw = 'CookieTree=' + escape(serialize(this.tree));\n\t\n\tif (!this.path.match(/\\/$/)) {\n\t\tthis.path = this.path.replace(/\\/[^\\/]+$/, \"\") + '/';\n\t}\n\t\n\tcookie_raw += '; expires=' + this.expires;\n\tcookie_raw += '; domain=' + this.domain;\n\tcookie_raw += '; path=' + this.path;\n\t\n\t// Debug.trace(\"Cookie\", \"Saving cookie: \" + cookie_raw);\n\t\n\tdocument.cookie = cookie_raw;\n};\n\nCookieTree.prototype.remove = function() {\n\t// remove cookie from document\n\tvar cookie_raw = 'CookieTree={}';\n\t\n\tif (!this.path.match(/\\/$/)) {\n\t\tthis.path = this.path.replace(/\\/[^\\/]+$/, \"\") + '/';\n\t}\n\t\n\tvar now = new Date();\n\tnow.setFullYear( now.getFullYear() - 1 ); // last year\n\tcookie_raw += '; expires=' + now.toGMTString();\n\t\n\tcookie_raw += '; domain=' + this.domain;\n\tcookie_raw += '; path=' + this.path;\n\t\n\tdocument.cookie = cookie_raw;\n};\n"]}